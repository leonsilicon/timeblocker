var Tt=Object.defineProperty;var _t=(d,t,n)=>t in d?Tt(d,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[t]=n;var w=(d,t,n)=>(_t(d,typeof t!="symbol"?t+"":t,n),n);import{a as F,m as H,o as D,c as C,t as lt,E as K,F as nt,C as st,k as ut,u as X,N as $t,n as L,G as wt,x as Mt,b as U,A as It,r as mt,j as O,H as Dt,w as St,q as ot,v as kt,I as gt,J as Ct,K as xt,y as Bt}from"./vendor.7f3c978e.js";import{u as P,b as Ot,c as Nt,d as Et}from"./timeblock.ab3f1eff.js";import{c as G,C as At}from"./circle-spinner.d8ea7cf9.js";import"./index.07bfcde8.js";import"./plugin-vue_export-helper.21dcd24c.js";var Ht=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vt={exports:{}};(function(d,t){(function(n,i){d.exports=i()})(Ht,function(){var n=1e3,i=6e4,l=36e5,h="millisecond",c="second",m="minute",b="hour",T="day",x="week",f="month",M="quarter",_="year",p="date",N="Invalid Date",B=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,V={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},z=function(r,o,e){var a=String(r);return!a||a.length>=o?r:""+Array(o+1-a.length).join(e)+r},rt={s:z,z:function(r){var o=-r.utcOffset(),e=Math.abs(o),a=Math.floor(e/60),s=e%60;return(o<=0?"+":"-")+z(a,2,"0")+":"+z(s,2,"0")},m:function r(o,e){if(o.date()<e.date())return-r(e,o);var a=12*(e.year()-o.year())+(e.month()-o.month()),s=o.clone().add(a,f),k=e-s<0,u=o.clone().add(a+(k?-1:1),f);return+(-(a+(e-s)/(k?s-u:u-s))||0)},a:function(r){return r<0?Math.ceil(r)||0:Math.floor(r)},p:function(r){return{M:f,y:_,w:x,d:T,D:p,h:b,m,s:c,ms:h,Q:M}[r]||String(r||"").toLowerCase().replace(/s$/,"")},u:function(r){return r===void 0}},Y="en",j={};j[Y]=V;var Z=function(r){return r instanceof at},E=function(r,o,e){var a;if(!r)return Y;if(typeof r=="string")j[r]&&(a=r),o&&(j[r]=o,a=r);else{var s=r.name;j[s]=r,a=s}return!e&&a&&(Y=a),a||!e&&Y},y=function(r,o){if(Z(r))return r.clone();var e=typeof o=="object"?o:{};return e.date=r,e.args=arguments,new at(e)},g=rt;g.l=E,g.i=Z,g.w=function(r,o){return y(r,{locale:o.$L,utc:o.$u,x:o.$x,$offset:o.$offset})};var at=function(){function r(e){this.$L=E(e.locale,null,!0),this.parse(e)}var o=r.prototype;return o.parse=function(e){this.$d=function(a){var s=a.date,k=a.utc;if(s===null)return new Date(NaN);if(g.u(s))return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){var u=s.match(B);if(u){var v=u[2]-1||0,I=(u[7]||"0").substring(0,3);return k?new Date(Date.UTC(u[1],v,u[3]||1,u[4]||0,u[5]||0,u[6]||0,I)):new Date(u[1],v,u[3]||1,u[4]||0,u[5]||0,u[6]||0,I)}}return new Date(s)}(e),this.$x=e.x||{},this.init()},o.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},o.$utils=function(){return g},o.isValid=function(){return this.$d.toString()!==N},o.isSame=function(e,a){var s=y(e);return this.startOf(a)<=s&&s<=this.endOf(a)},o.isAfter=function(e,a){return y(e)<this.startOf(a)},o.isBefore=function(e,a){return this.endOf(a)<y(e)},o.$g=function(e,a,s){return g.u(e)?this[a]:this.set(s,e)},o.unix=function(){return Math.floor(this.valueOf()/1e3)},o.valueOf=function(){return this.$d.getTime()},o.startOf=function(e,a){var s=this,k=!!g.u(a)||a,u=g.p(e),v=function(Q,A){var J=g.w(s.$u?Date.UTC(s.$y,A,Q):new Date(s.$y,A,Q),s);return k?J:J.endOf(T)},I=function(Q,A){return g.w(s.toDate()[Q].apply(s.toDate("s"),(k?[0,0,0,0]:[23,59,59,999]).slice(A)),s)},$=this.$W,S=this.$M,W=this.$D,R="set"+(this.$u?"UTC":"");switch(u){case _:return k?v(1,0):v(31,11);case f:return k?v(1,S):v(0,S+1);case x:var tt=this.$locale().weekStart||0,et=($<tt?$+7:$)-tt;return v(k?W-et:W+(6-et),S);case T:case p:return I(R+"Hours",0);case b:return I(R+"Minutes",1);case m:return I(R+"Seconds",2);case c:return I(R+"Milliseconds",3);default:return this.clone()}},o.endOf=function(e){return this.startOf(e,!1)},o.$set=function(e,a){var s,k=g.p(e),u="set"+(this.$u?"UTC":""),v=(s={},s[T]=u+"Date",s[p]=u+"Date",s[f]=u+"Month",s[_]=u+"FullYear",s[b]=u+"Hours",s[m]=u+"Minutes",s[c]=u+"Seconds",s[h]=u+"Milliseconds",s)[k],I=k===T?this.$D+(a-this.$W):a;if(k===f||k===_){var $=this.clone().set(p,1);$.$d[v](I),$.init(),this.$d=$.set(p,Math.min(this.$D,$.daysInMonth())).$d}else v&&this.$d[v](I);return this.init(),this},o.set=function(e,a){return this.clone().$set(e,a)},o.get=function(e){return this[g.p(e)]()},o.add=function(e,a){var s,k=this;e=Number(e);var u=g.p(a),v=function(S){var W=y(k);return g.w(W.date(W.date()+Math.round(S*e)),k)};if(u===f)return this.set(f,this.$M+e);if(u===_)return this.set(_,this.$y+e);if(u===T)return v(1);if(u===x)return v(7);var I=(s={},s[m]=i,s[b]=l,s[c]=n,s)[u]||1,$=this.$d.getTime()+e*I;return g.w($,this)},o.subtract=function(e,a){return this.add(-1*e,a)},o.format=function(e){var a=this,s=this.$locale();if(!this.isValid())return s.invalidDate||N;var k=e||"YYYY-MM-DDTHH:mm:ssZ",u=g.z(this),v=this.$H,I=this.$m,$=this.$M,S=s.weekdays,W=s.months,R=function(A,J,dt,ct){return A&&(A[J]||A(a,k))||dt[J].substr(0,ct)},tt=function(A){return g.s(v%12||12,A,"0")},et=s.meridiem||function(A,J,dt){var ct=A<12?"AM":"PM";return dt?ct.toLowerCase():ct},Q={YY:String(this.$y).slice(-2),YYYY:this.$y,M:$+1,MM:g.s($+1,2,"0"),MMM:R(s.monthsShort,$,W,3),MMMM:R(W,$),D:this.$D,DD:g.s(this.$D,2,"0"),d:String(this.$W),dd:R(s.weekdaysMin,this.$W,S,2),ddd:R(s.weekdaysShort,this.$W,S,3),dddd:S[this.$W],H:String(v),HH:g.s(v,2,"0"),h:tt(1),hh:tt(2),a:et(v,I,!0),A:et(v,I,!1),m:String(I),mm:g.s(I,2,"0"),s:String(this.$s),ss:g.s(this.$s,2,"0"),SSS:g.s(this.$ms,3,"0"),Z:u};return k.replace(q,function(A,J){return J||Q[A]||u.replace(":","")})},o.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},o.diff=function(e,a,s){var k,u=g.p(a),v=y(e),I=(v.utcOffset()-this.utcOffset())*i,$=this-v,S=g.m(this,v);return S=(k={},k[_]=S/12,k[f]=S,k[M]=S/3,k[x]=($-I)/6048e5,k[T]=($-I)/864e5,k[b]=$/l,k[m]=$/i,k[c]=$/n,k)[u]||$,s?S:g.a(S)},o.daysInMonth=function(){return this.endOf(f).$D},o.$locale=function(){return j[this.$L]},o.locale=function(e,a){if(!e)return this.$L;var s=this.clone(),k=E(e,a,!0);return k&&(s.$L=k),s},o.clone=function(){return g.w(this.$d,this)},o.toDate=function(){return new Date(this.valueOf())},o.toJSON=function(){return this.isValid()?this.toISOString():null},o.toISOString=function(){return this.$d.toISOString()},o.toString=function(){return this.$d.toUTCString()},r}(),pt=at.prototype;return y.prototype=pt,[["$ms",h],["$s",c],["$m",m],["$H",b],["$W",T],["$M",f],["$y",_],["$D",p]].forEach(function(r){pt[r[1]]=function(o){return this.$g(o,r[0],r[1])}}),y.extend=function(r,o){return r.$i||(r(o,at,y),r.$i=!0),y},y.locale=E,y.isDayjs=Z,y.unix=function(r){return y(1e3*r)},y.en=j[Y],y.Ls=j,y.p={},y})})(vt);var Yt=vt.exports;let ft=(d=21)=>{let t="",n=crypto.getRandomValues(new Uint8Array(d));for(;d--;){let i=n[d]&63;i<36?t+=i.toString(36):i<62?t+=(i-26).toString(36).toUpperCase():i<63?t+="_":t+="-"}return t};function jt({taskBlocks:d}){const t=[];for(const n of d){const i=n.getStartMinute(),l=n.getEndMinute();t.push(l-i)}return t}var it;(function(d){d.taskBoxDrop="task-box-drop"})(it||(it={}));const Vt=F({props:{taskBlockId:null,heightRatio:null},setup(d){const t=d,n=P(),i=H(()=>n.activeTimeblock.getTaskBlock(t.taskBlockId)),l=H(()=>i.value.getTask()),h=H(()=>({"grid-column":"1 / span 1","grid-row-start":1+i.value.getStartMinute(),"grid-row-end":1+i.value.getEndMinute()}));function c(m){var b;(b=m.dataTransfer)==null||b.setData("text",JSON.stringify({type:it.taskBoxDrop,payload:{sourceTaskBlockId:t.taskBlockId}}))}return(m,b)=>(D(),C("div",{draggable:"true",class:"column center rounded-md bg-red-200 cursor-grab active:cursor-grabbing",style:K(h.value),onDragstart:c},lt(l.value.getName()),37))}}),Ft=F({props:{startDayMinute:null,endDayMinute:null},setup(d){const t=d,n=H(()=>({"grid-row-start":1+t.startDayMinute,"grid-row-end":1+t.endDayMinute,"grid-column":"1 / span 1"}));return(i,l)=>(D(),C("div",{style:K(n.value),class:"w-full h-full border-t border-x border-gray-200 -z-1"},null,4))}}),Lt=F({setup(d){const t=H(()=>({display:"grid","grid-template-rows":"repeat(1440, 1px)","grid-template-columns":"1fr"})),n=Array.from({length:24}).map((i,l)=>l*60);return(i,l)=>(D(),C("div",{style:K(t.value),class:"border-b border-gray-200"},[(D(!0),C(nt,null,st(X(n),h=>(D(),ut(Ft,{key:h,"start-day-minute":h,"end-day-minute":h+60},null,8,["start-day-minute","end-day-minute"]))),128))],4))}});class bt{constructor({id:t,task:n,startMinute:i,endMinute:l,timeblock:h,timeblockColumnId:c}){w(this,"id");w(this,"task");w(this,"startMinute");w(this,"endMinute");w(this,"timeblock");w(this,"timeblockColumnId");this.id=t,this.timeblock=h,this.task=n,this.setStartMinute(i),this.setEndMinute(l),this.setTimeblockColumnId(c)}getId(){return this.id}getTask(){return this.task}setTask(t){this.task=t}getStartMinute(){return this.startMinute}setStartMinute(t){if(t===void 0)throw new Error("startMinute cannot be undefined.");if(t<0||t>1440)throw new Error(`Minute must be between 0 and 1440, received ${t}`);this.startMinute=t}getEndMinute(){return this.endMinute}setEndMinute(t){if(t===void 0)throw new Error("endMinute cannot be undefined.");if(t<0||t>1440)throw new Error(`Minute must be between 0 and 1440, received ${t}`);this.endMinute=t}getTimeblockColumnId(){return this.timeblockColumnId}setTimeblockColumnId(t){this.timeblockColumnId=t}}function ht(d){$t.create({message:String(d),type:"error"})}const Ut=["onDragover"],Rt=F({props:{timeblockColumnId:null,date:null},setup(d){const t=d,n=P();(async()=>{var _;const f=await G.query("getTimeblockTaskBlocks",{timeblockColumnId:t.timeblockColumnId}),M=n.activeTimeblock;for(const{taskId:p,startMinute:N,endMinute:B,timeblockColumnId:q,id:V}of f){const z=new bt({id:V,startMinute:N,endMinute:B,timeblockColumnId:q,task:M.getTask(p),timeblock:M});M.addTaskBlock(z),(_=M.getColumn(q))==null||_.addTaskBlock(V)}})();const i=H(()=>{var f,M;return(M=(f=n.activeTimeblock.getColumn(t.timeblockColumnId))==null?void 0:f.getTaskBlocks())!=null?M:[]}),l=H(()=>jt({taskBlocks:i.value})),h=H(()=>({display:"grid","grid-template-rows":"repeat(1440, 1px)","grid-template-columns":"1fr"}));let c=L(!1);const m=wt({"grid-column":"1 / span 1","grid-row-start":1,"grid-row-end":61}),b=L();function T(f){const M=f.clientY-b.value.getBoundingClientRect().top;c.value=!0;const _=Math.round(M/15)*15;m["grid-row-start"]=_+1,m["grid-row-end"]=_+1+60}async function x(f){var _,p,N,B;c.value=!1;const M=(_=f.dataTransfer)==null?void 0:_.getData("text");if(M!==void 0){const q=JSON.parse(M);if(q.type===it.taskBoxDrop){const{payload:V}=q,z=f.clientY-b.value.getBoundingClientRect().top,rt=Math.round(z/15)*15,{activeTimeblock:Y}=n,j=rt,Z=rt+60;if("taskId"in V){const E=Y.getTask(V.taskId);if(E===void 0){ht("Task not found.");return}const y=new bt({id:ft(),timeblock:Y,task:E,startMinute:j,endMinute:Z,timeblockColumnId:t.timeblockColumnId});Y.addTaskBlock(y),(p=Y.getColumn(t.timeblockColumnId))==null||p.addTaskBlock(y.getId()),await G.mutation("addTimeblockTaskBlock",{taskBlockId:y.getId(),taskId:V.taskId,timeblockColumnId:t.timeblockColumnId,startMinute:j,endMinute:Z})}else if("sourceTaskBlockId"in V){const E=Y.getTaskBlock(V.sourceTaskBlockId);if(E===void 0)ht("Task block is undefined.");else{E.setStartMinute(j),E.setEndMinute(Z);const y=E.getTimeblockColumnId();(N=Y.getColumn(y))==null||N.removeTaskBlock(E.getId()),(B=Y.getColumn(t.timeblockColumnId))==null||B.addTaskBlock(E.getId())}}}}}return(f,M)=>(D(),C("div",{ref_key:"timeblockColumnEl",ref:b,style:K(h.value),class:"border-b border-gray-200 -z-1",onDrop:x,onDragover:It(T,["prevent"])},[c.value?(D(),C("div",{key:0,style:K(X(m)),class:"bg-red-100 rounded-md"},null,4)):Mt("",!0),U(Lt,{style:{"grid-row":"1 / -1","grid-column":"1 / -1"}}),(D(!0),C(nt,null,st(i.value,(_,p)=>(D(),ut(Vt,{key:_.getId(),"task-block-id":_.getId(),"height-ratio":l.value[p]},null,8,["task-block-id","height-ratio"]))),128))],44,Ut))}}),Wt=F({setup(d){const t=P(),n=H(()=>t.activeTimeblock.getColumns());function i(l){return{"grid-column-start":l+2,"grid-column-end":l+3,"grid-row":"1 / -1"}}return(l,h)=>(D(!0),C(nt,null,st(n.value,(c,m)=>(D(),ut(Rt,{key:c.getId(),style:K(i(m)),"timeblock-column-id":c.getId(),date:c.getDate()},null,8,["style","timeblock-column-id","date"]))),128))}}),Jt={class:"column items-center"},Kt=F({setup(d){function t(c){let m;return c<12?m="AM":c<24?m="PM":m="AM",`${c%12==0?12:c%12} ${m}`}function n({hour:c,minute:m}){return{"grid-row-start":1+(c*60+m),"grid-row-end":1+((c+1)*60+m)}}const i=P(),l=H(()=>({display:"grid","grid-template-rows":"repeat(1440, 1px)","grid-template-columns":`60px repeat(${i.activeTimeblock.getColumns().length}, 1fr) auto`}));function h(){const c=ft();i.activeTimeblock.addColumn(c)}return(c,m)=>{const b=mt("v-icon");return D(),C("div",{style:K(l.value),class:"w-full"},[(D(),C(nt,null,st(25,T=>O("div",{key:T-1,class:"text-gray-500 text-right mr-2 -mt-[12px]",style:K(n({hour:T-1,minute:0}))},lt(t(T-1)),5)),64)),U(Wt),O("div",Jt,[U(b,{class:"px-3 text-gray-700 cursor-pointer",icon:X(Ot),onClick:h},null,8,["icon"])])],4)}}}),Pt={class:"row items-center justify-center mb-2"},qt={class:"flex-1 p-4 mr-auto row gap-2"},zt={class:"flex-1 row justify-center"},Zt=O("div",{class:"flex-1 ml-auto"},null,-1),Gt=F({setup(d){const t=P();function n(){t.isTaskDockOpen=!t.isTaskDockOpen}const i=L(t.activeTimeblock.getName()),l=L();async function h(){await G.mutation("updateTimeblock",{timeblockId:t.activeTimeblock.getId(),name:i.value})}function c(m){m.key==="Enter"&&l.value.blur()}return(m,b)=>{const T=mt("v-icon"),x=mt("router-link"),f=Dt("autowidth");return D(),C("div",Pt,[O("div",qt,[U(x,{to:"/timeblocks"},{default:St(()=>[U(T,{icon:X(Nt),class:"cursor-pointer"},null,8,["icon"])]),_:1}),U(T,{icon:X(Et),class:"cursor-pointer",onClick:n},null,8,["icon"])]),O("div",zt,[ot(O("input",{ref_key:"timeblockNameInput",ref:l,"onUpdate:modelValue":b[0]||(b[0]=M=>i.value=M),class:"input input-sm text-xl font-bold px-2 hover:border-md hover:border-gray-300 rounded-md transition-[border]",onKeypress:c,onFocusout:h},null,544),[[kt,i.value],[f]])]),Zt])}}});class yt{constructor({id:t,name:n,description:i,color:l}){w(this,"id");w(this,"name");w(this,"color");w(this,"description");this.id=t,this.setName(n),this.setColor(l!=null?l:"lightred"),i!==void 0&&this.setDescription(i)}setName(t){this.name=t}getName(){return this.name}getId(){return this.id}getColor(){return this.color}setColor(t){this.color=t}getDescription(){return this.description}setDescription(t){this.description=t}removeDescription(){this.description=void 0}}const Qt={class:"text-gray-500 text-sm px-2"},Xt=F({props:{id:null},setup(d){const t=d,n=P(),i=H(()=>n.activeTimeblock.getTask(t.id));function l(h){var c;(c=h.dataTransfer)==null||c.setData("text",JSON.stringify({type:it.taskBoxDrop,payload:{taskId:t.id}}))}return(h,c)=>(D(),C("div",{draggable:"true",class:"py-2 rounded-lg text-center self-stretch m-2 bg-red-100 cursor-grab active:cursor-grabbing column",onDragstart:l},[O("div",null,lt(i.value.getName()),1),O("div",Qt,lt(i.value.getDescription()),1)],32))}}),te={class:"items-center column shrink-0 w-[250px]"},ee=O("div",{class:"font-bold text-3xl mb-2"},"Tasks",-1),ne={class:"py-2 rounded-lg text-center self-stretch m-2 bg-red-100"},se=F({setup(d){const t=P(),n=H(()=>t.activeTimeblock.getOrderedTaskIds().map(p=>t.activeTimeblock.getTask(p)));let i=L(!1),l=L(""),h=L("");const c=L(),m=L();async function b(){if(l.value.trim()!==""){const p=ft(),N=new yt({id:p,name:l.value,description:h.value});t.activeTimeblock.addTask(N);try{await G.mutation("addTimeblockTask",{timeblockId:t.activeTimeblock.getId(),id:p,name:l.value,description:h.value})}catch(B){ht(B)}}l.value="",h.value="",i.value=!1}async function T(p){p.relatedTarget!==m.value&&await b()}async function x(p){p.relatedTarget!==c.value&&await b()}function f(p){p.key==="Enter"&&m.value.focus()}function M(p){p.key==="Enter"&&m.value.blur()}async function _(){i.value=!0,await Ct(),c.value.focus()}return(p,N)=>ot((D(),C("div",te,[ee,O("div",{class:"btn btn-primary btn-sm min-h-2 h-2",onClick:_}," Add Task "),ot(O("div",null,[O("div",ne,[ot(O("input",{ref_key:"taskNameInputEl",ref:c,"onUpdate:modelValue":N[0]||(N[0]=B=>l.value=B),placeholder:"Task Name",type:"text",class:"bg-red-100 outline-none w-full px-4",onFocusout:T,onKeydown:f},null,544),[[kt,l.value]]),ot(O("input",{ref_key:"taskDescriptionInputEl",ref:m,"onUpdate:modelValue":N[1]||(N[1]=B=>h.value=B),placeholder:"Task Description",type:"text",class:"bg-red-100 outline-none w-full px-4 text-sm",onFocusout:x,onKeydown:M},null,544),[[kt,h.value]])])],512),[[gt,i.value]]),(D(!0),C(nt,null,st(n.value,B=>(D(),ut(Xt,{id:B.getId(),key:B.getId()},null,8,["id"]))),128))],512)),[[gt,X(t).isTaskDockOpen]])}});class oe{constructor({timeblock:t,id:n}){w(this,"timeblock");w(this,"id");w(this,"taskBlockIds");this.id=n,this.timeblock=t,this.taskBlockIds=new Set}getDate(){return this.timeblock.getDate()}getId(){return this.id}setTimeblock(t){this.timeblock=t}getTimeblock(){return this.timeblock}addTaskBlock(t){const n=this.timeblock.getTaskBlock(t);this.taskBlockIds.add(t),n.setTimeblockColumnId(this.getId())}removeTaskBlock(t){this.timeblock.getTaskBlock(t).setTimeblockColumnId(void 0),this.taskBlockIds.delete(t)}getTaskBlocks(){return[...this.taskBlockIds.values()].map(t=>this.timeblock.getTaskBlock(t))}}class ie{constructor({id:t,date:n,name:i}){w(this,"id");w(this,"date");w(this,"name");w(this,"columns");w(this,"taskMap");w(this,"taskBlockMap");w(this,"orderedTaskIds");w(this,"taskBlockToColumnNumberMap");this.id=t,this.name=i,this.date=n,this.taskMap=new Map,this.taskBlockMap=new Map,this.orderedTaskIds=[],this.columns=[]}getId(){return this.id}getName(){return this.name}setName(t){this.name=t}addTask(t,n=0){this.taskMap.set(t.getId(),t),this.orderedTaskIds.splice(n,0,t.getId())}removeTask(t){this.taskMap.delete(t)}getTask(t){const n=this.taskMap.get(t);if(n===void 0)throw new Error(`Task with ID ${t} not found.`);return n}getTaskBlock(t){const n=this.taskBlockMap.get(t);if(n===void 0)throw new Error(`Task block with ID ${t} not found.`);return n}addTaskBlock(t){this.taskBlockMap.set(t.getId(),t)}getOrderedTaskIds(){return this.orderedTaskIds}addColumn(t){this.columns.push(new oe({timeblock:this,id:t}))}getColumn(t){return this.columns.find(n=>n.getId()===t)}getDate(){return this.date}setDate(t){this.date=t}getColumns(){return this.columns}}const re={key:0},ae={key:1,class:"column"},ce={class:"row px-4"},he=F({setup(d){const t=Bt(),n=H(()=>t.params),i=H(()=>n.value.id),l=P();xt(()=>n.value.id,()=>{l.activeTimeblockId=n.value.id});let h=L(!0);return(async()=>{const[c,m,b]=await Promise.all([G.query("getTimeblock",{timeblockId:n.value.id}),G.query("getTimeblockTasks",{timeblockId:n.value.id,limit:10,skip:0}),G.query("getTimeblockColumns",{timeblockId:n.value.id})]),T=Yt();if(!l.hasTimeblock(i.value)){const x=new ie({id:i.value,name:c.name,date:{day:T.date(),month:T.month(),year:T.year()}});for(const f of m)x.addTask(new yt({id:f.id,name:f.name,description:f.description}));l.addTimeblock(x),l.activeTimeblockId=x.getId();for(const f of b)x.addColumn(f.id)}h.value=!1})(),(c,m)=>h.value?(D(),C("div",re,[U(At)])):(D(),C("div",ae,[U(Gt),O("div",ce,[U(se),U(Kt)])]))}});export{he as default};
