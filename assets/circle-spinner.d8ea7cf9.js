import{L as M}from"./index.07bfcde8.js";import{_ as U}from"./plugin-vue_export-helper.21dcd24c.js";import{o as H,c as K}from"./vendor.7f3c978e.js";function E(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function C(n,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(n,t.key,t)}}function T(n,e,r){return e&&C(n.prototype,e),r&&C(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}function J(n,e,r){return e in n?Object.defineProperty(n,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[e]=r,n}function q(n,e){var r=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);e&&(t=t.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),r.push.apply(r,t)}return r}function h(n){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?q(Object(r),!0).forEach(function(t){J(n,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(r,t))})}return n}function z(n,e){(e==null||e>n.length)&&(e=n.length);for(var r=0,t=new Array(e);r<e;r++)t[r]=n[r];return t}function W(n,e){if(!!n){if(typeof n=="string")return z(n,e);var r=Object.prototype.toString.call(n).slice(8,-1);if(r==="Object"&&n.constructor&&(r=n.constructor.name),r==="Map"||r==="Set")return Array.from(n);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(n,e)}}function j(n,e){var r=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=W(n))||e&&n&&typeof n.length=="number"){r&&(n=r);var t=0,o=function(){};return{s:o,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(c){throw c},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,f=!1,u;return{s:function(){r=r.call(n)},n:function(){var c=r.next();return i=c.done,c},e:function(c){f=!0,u=c},f:function(){try{!i&&r.return!=null&&r.return()}finally{if(f)throw u}}}}function R(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function b(n,e){return b=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},b(n,e)}function k(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&b(n,e)}function g(n){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},g(n)}function B(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function A(n){return A=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(n)}function G(n,e){if(e&&(A(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return R(n)}function N(n){var e=B();return function(){var t=g(n),o;if(e){var i=g(this).constructor;o=Reflect.construct(t,arguments,i)}else o=t.apply(this,arguments);return G(this,o)}}function Q(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function O(n,e,r){return B()?O=Reflect.construct:O=function(o,i,f){var u=[null];u.push.apply(u,i);var a=Function.bind.apply(o,u),c=new a;return f&&b(c,f.prototype),c},O.apply(null,arguments)}function x(n){var e=typeof Map=="function"?new Map:void 0;return x=function(t){if(t===null||!Q(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(t))return e.get(t);e.set(t,o)}function o(){return O(t,arguments,g(this).constructor)}return o.prototype=Object.create(t.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),b(o,t)},x(n)}var P=function(n){k(r,n);var e=N(r);function r(t,o){var i,f,u,a,c;E(this,r);var v=(i=o.cause)!==null&&i!==void 0?i:o.originalError;return c=e.call(this,t,{cause:v}),c.originalError=void 0,c.cause=void 0,c.shape=void 0,c.data=void 0,c.isDone=void 0,c.isDone=(f=o.isDone)!==null&&f!==void 0?f:!1,c.cause=c.originalError=v,c.shape=(u=o.result)===null||u===void 0?void 0:u.error,c.data=(a=o.result)===null||a===void 0?void 0:a.error.data,c.name="TRPCClientError",Object.setPrototypeOf(R(c),r.prototype),c}return T(r,null,[{key:"from",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(o instanceof Error)){var f;return new r((f=o.error.message)!==null&&f!==void 0?f:"",h(h({},i),{},{cause:null,result:o}))}return o.name==="TRPCClientError"?o:new r(o.message,h(h({},i),{},{cause:o,result:null}))}}]),r}(x(Error)),I=function(n){k(r,n);var e=N(r);function r(){var t;return E(this,r),t=e.call(this,"The operation was aborted."),t.name="TRPCAbortError",Object.setPrototypeOf(R(t),r.prototype),t}return T(r)}(x(Error));function X(n){for(var e={},r=0;r<n.length;r++){var t=n[r];e[r]=t}return e}function Y(n){var e=n.type,r=n.runtime,t=n.path,o=r.AbortController?new r.AbortController:null,i={query:"GET",mutation:"POST",subscription:"PATCH"},f="input"in n?r.transformer.serialize(n.input):X(n.inputs.map(function(s){return r.transformer.serialize(s)}));function u(){var s=n.url+"/"+t,l=[];return"inputs"in n&&l.push("batch=1"),e==="query"&&f!==void 0&&l.push("input=".concat(encodeURIComponent(JSON.stringify(f)))),l.length&&(s+="?"+l.join("&")),s}function a(){if(e!=="query")return f!==void 0?JSON.stringify(f):void 0}var c=new Promise(function(s,l){var p=u();Promise.resolve(r.headers()).then(function(d){return r.fetch(p,{method:i[e],signal:o==null?void 0:o.signal,body:a(),headers:h({"content-type":"application/json"},d)})}).then(function(d){return d.json()}).then(function(d){s(d)}).catch(l)}),v=function(){o==null||o.abort()};return{promise:c,cancel:v}}function Z(n){var e=n.envelope,r=n.runtime;return"error"in e?P.from(h(h({},e),{},{error:r.transformer.deserialize(e.error)})):e.result.type==="data"?h(h({},e.result),{},{data:r.transformer.deserialize(e.result.data)}):e.result}function D(n,e){var r=null,t=null,o=function(){clearTimeout(t),t=null,r=null};function i(){var u=r;o();var a=n(u.items.map(function(s){return s.key})),c=a.promise,v=a.cancel;u.cancel=v,c.then(function(s){for(var l=0;l<s.length;l++){var p=s[l];u.items[l].resolve(p)}}).catch(function(s){var l=j(u.items),p;try{for(l.s();!(p=l.n()).done;){var d=p.value;d.reject(s)}}catch(y){l.e(y)}finally{l.f()}})}function f(u){var a={cancelled:!1,key:u};r||(r={items:[],cancel:function(){o()}});var c=r,v=new Promise(function(l,p){var d=a;if(d.reject=p,d.resolve=l,c.items.push(d),typeof(e==null?void 0:e.maxBatchSize)!="undefined"&&c.items.length>=e.maxBatchSize){i();return}});t||(t=setTimeout(i));var s=function(){a.cancelled=!0,!c.items.some(function(p){return!p.cancelled})&&c.cancel()};return{promise:v,cancel:s}}return{load:f}}function V(n){var e=n.url,r=n.maxBatchSize;return function(t){var o=function(v){return function(s){var l=s.map(function(m){return m.path}).join(","),p=s.map(function(m){return m.input}),d=Y({url:e,inputs:p,path:l,runtime:t,type:v}),y=d.promise,_=d.cancel;return{promise:y.then(function(m){return Array.isArray(m)?m:s.map(function(){return m})}),cancel:_}}},i=D(o("query"),{maxBatchSize:r}),f=D(o("mutation"),{maxBatchSize:r}),u=D(o("subscription"),{maxBatchSize:r}),a={query:i,subscription:u,mutation:f};return function(c){var v=c.op,s=c.prev,l=c.onDestroy,p=a[v.type],d=p.load(v),y=d.promise,_=d.cancel,m=!1,S=function(L){m||(m=!0,s(L))};l(function(){S(P.from(new I,{isDone:!0})),_()}),y.then(function(w){S(Z({envelope:w,runtime:t}))}).catch(function(w){S(P.from(w))})}}}function $(){var n=[],e=null;return{subscribe:function(t){var o={callbacks:t,unsubscribe:function(){var f=n.indexOf(o);if(f!==-1){var u,a;n.splice(f,1),(u=(a=o.callbacks).onDone)===null||u===void 0||u.call(a)}}};return n.push(o),function(){o.unsubscribe()}},next:function(t){var o=e;if(e=t,o!==t){var i=j(n),f;try{for(i.s();!(f=i.n()).done;){var u,a,c=f.value;(u=(a=c.callbacks).onNext)===null||u===void 0||u.call(a,t)}}catch(v){i.e(v)}finally{i.f()}}},done:function(){for(;n.length;){var t,o,i=n.pop();i==null||(t=(o=i.callbacks).onDone)===null||t===void 0||t.call(o),i==null||i.unsubscribe()}},error:function(r){function t(o){return r.apply(this,arguments)}return t.toString=function(){return r.toString()},t}(function(r){var t=j(n),o;try{for(t.s();!(o=t.n()).done;){var i,f,u=o.value;(i=(f=u.callbacks).onError)===null||i===void 0||i.call(f,r)}}catch(a){t.e(a)}finally{t.f()}})}}function ee(n){var e=$(),r=n;return e.next(n),h(h({},e),{},{next:function(o){r=o,e.next(o)},get:function(){return r}})}function ne(n){var e=ee(null),r=function(i){i instanceof Error?(e.error(i),i.isDone&&e.done()):e.next(i)};function t(o){var i=o.index,f=o.op,u=o.stack,a=n.links[i],c=i===0?function(v){return r(v)}:u[i-1];a({op:f,prev:c,next:function(s,l){var p=u.slice();p[i]=l,t({index:i+1,op:s,stack:p})},onDestroy:function(s){e.subscribe({onDone:function(){s()}})}})}return t({index:0,op:n.op,stack:[]}),e}function F(){return typeof window!="undefined"?window:global}function re(n){var e=F();return n||e.AbortController||null}function te(n){if(n)return n;var e=F();if(e.fetch)return typeof e.fetch.bind=="function"?e.fetch.bind(e):e.fetch;throw new Error("No fetch implementation found")}var oe=0;function ie(){return++oe}var ue=function(){function n(e){var r=this;E(this,n),this.links=void 0,this.runtime=void 0;var t=e.transformer?"input"in e.transformer?{serialize:e.transformer.input.serialize,deserialize:e.transformer.output.deserialize}:e.transformer:{serialize:function(a){return a},deserialize:function(a){return a}},o=te(e==null?void 0:e.fetch),i=re(e==null?void 0:e.AbortController);function f(){if(e.headers){var u=e.headers;return typeof u=="function"?u:function(){return u}}return function(){return{}}}this.runtime={transformer:t,AbortController:i,fetch:o,headers:f()},"links"in e?this.links=e.links.map(function(u){return u(r.runtime)}):this.links=[V({url:e.url})(this.runtime)]}return T(n,[{key:"$request",value:function(r){var t=r.type,o=r.input,i=r.path,f=r.context,u=f===void 0?{}:f,a=ne({links:this.links,op:{id:ie(),type:t,path:i,input:o,context:u}});return a}},{key:"requestAsPromise",value:function(r){var t=this.$request(r),o=new Promise(function(i,f){var u=t.get();if((u==null?void 0:u.type)==="data"){i(u.data),t.done();return}t.subscribe({onNext:function(c){(c==null?void 0:c.type)==="data"&&(i(c.data),t.done())},onError:function(c){f(c),t.done()},onDone:function(){f(P.from(new I))}})});return o.cancel=function(){t.done()},o}},{key:"query",value:function(r){var t,o=(t=arguments.length<=2?void 0:arguments[2])===null||t===void 0?void 0:t.context;return this.requestAsPromise({type:"query",path:r,input:arguments.length<=1?void 0:arguments[1],context:o})}},{key:"mutation",value:function(r){var t,o=(t=arguments.length<=2?void 0:arguments[2])===null||t===void 0?void 0:t.context;return this.requestAsPromise({type:"mutation",path:r,input:arguments.length<=1?void 0:arguments[1],context:o})}},{key:"subscription",value:function(r,t,o){var i=this.$request({type:"subscription",path:r,input:t,context:o.context});return i.subscribe({onNext:function(u){if(u){var a;(a=o.onNext)===null||a===void 0||a.call(o,u)}},onError:function(u){var a;(a=o.onError)===null||a===void 0||a.call(o,u)},onDone:o.onDone}),function(){i.done()}}}]),n}();function ae(n){return new ue(n)}const de=ae({url:{}.VITE_BACKEND_URL,headers:()=>{const n=window.localStorage.getItem(M.sessionToken);return n===null?{}:{authorization:`Bearer ${n}`}}}),ce={},fe={class:"spinner-border w-6 h-6 animate-spin rounded-full"};function le(n,e){return H(),K("div",fe)}var he=U(ce,[["render",le]]);export{he as C,de as c};
