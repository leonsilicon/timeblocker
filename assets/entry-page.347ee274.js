import{a as L,y as w,z as i,b as d,l as e,t as p,A as m,B as f,C as g,E as R,e as T,w as j,G as B,u as S,r as N,o as u,n as P}from"./vendor.168e4e1c.js";import{c as y,L as _}from"./index.8728a630.js";import{C as D}from"./circle-spinner.93ce019f.js";import{g as k}from"./error.be133613.js";import"./plugin-vue_export-helper.21dcd24c.js";const U={class:"column my-auto items-center gap-3 self-center rounded-md border-2 border-gray-300 py-8 px-20"},q={class:"text-6xl font-bold"},A=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Email")],-1),I=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Password")],-1),M={key:0},z=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Confirm Password")],-1),G={key:1},K={key:1,class:"text-red-400"},W=L({setup($){const x=B(),b=S(),a=w(()=>x.path==="/login"),h=w(()=>!a.value),c=i(""),n=i(""),v=i("");let o=i(""),r=i(!1);async function C(){try{o.value="",r.value=!0;const{sessionToken:t}=await y.mutation("login",{email:c.value,password:n.value});window.localStorage.setItem(_.sessionToken,t),await b.push("/timeblocks")}catch(t){o.value=k(t)}finally{r.value=!1}}async function V(){try{if(n.value!==v.value)throw new Error("Passwords are not equal.");o.value="",r.value=!0;const{sessionToken:t}=await y.mutation("register",{email:c.value,password:n.value});window.localStorage.setItem(_.sessionToken,t),await b.push("/timeblocks")}catch(t){o.value=k(t)}finally{r.value=!1}}return(t,s)=>{const E=N("router-link");return u(),d("div",U,[e("h1",q,p(a.value?"Login":"Register"),1),e("div",null,[A,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),class:"input input-bordered w-[20rem]",type:"text"},null,512),[[f,c.value]])]),e("div",null,[I,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>n.value=l),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[f,n.value]])]),h.value?(u(),d("div",M,[z,m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>v.value=l),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[f,v.value]])])):g("",!0),e("button",{class:"btn btn-primary mt-2 px-8",onClick:s[3]||(s[3]=l=>a.value?C():V())},[r.value?(u(),R(D,{key:0})):(u(),d("div",G,p(a.value?"Login":"Register"),1))]),o.value!==""?(u(),d("div",K,p(o.value),1)):g("",!0),T(E,{class:"link hover:text-secondary transition-all",to:{force:!0,path:a.value?"/register":"/login"}},{default:j(()=>[P(p(a.value?"Don't have an account?":"Already have an account?"),1)]),_:1},8,["to"])])}}});export{W as default};
