import{d as _,c as h,a as y,r as v,o as k,b as E,e as w,f as L,g as I,N as l,m as T,h as b,i as S,j as P,s as O,k as j,Q as A,D as V,l as R,n as x}from"./vendor.d57eb1e4.js";const D=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}};D();function C(){return{isLoggedIn:void 0,accountId:void 0}}const u=_("app",{state:()=>C()});var c;(function(o){o.sessionToken="session-token"})(c||(c={}));const d=h({url:"https://ib-timeblocker.herokuapp.com/trpc",headers:()=>{const o=window.localStorage.getItem(c.sessionToken);return o===null?{}:{authorization:`Bearer ${o}`}}});const N={class:"h-full w-full","data-theme":"emerald"},$=y({setup(o){const t=u();return(async()=>{t.isLoggedIn?await d.query("checkToken")||(window.localStorage.removeItem(c.sessionToken),t.isLoggedIn=!1):await d.query("ping")})(),window.localStorage.getItem(c.sessionToken)===null?t.isLoggedIn=!1:t.isLoggedIn=!0,(n,e)=>{const s=v("router-view");return k(),E("div",N,[w(s)])}}});const q="modulepreload",p={},H="/",a=function(t,r){return!r||r.length===0?t():Promise.all(r.map(n=>{if(n=`${H}${n}`,n in p)return;p[n]=!0;const e=n.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${s}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":q,e||(i.as="script",i.crossOrigin=""),i.href=n,document.head.appendChild(i),e)return new Promise((m,g)=>{i.addEventListener("load",m),i.addEventListener("error",g)})})).then(()=>t())},M=[{path:"/",component:async()=>a(()=>import("./content-layout.4147e045.js"),["assets/content-layout.4147e045.js","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css"]),children:[{path:"/",component:async()=>a(()=>import("./landing-page.b884d88b.js"),["assets/landing-page.b884d88b.js","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css"])},{path:"/login",component:async()=>a(()=>import("./entry-page.d7200fbf.js"),["assets/entry-page.d7200fbf.js","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css","assets/circle-spinner.13cd4e61.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/register",component:async()=>a(()=>import("./entry-page.d7200fbf.js"),["assets/entry-page.d7200fbf.js","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css","assets/circle-spinner.13cd4e61.js","assets/plugin-vue_export-helper.21dcd24c.js"])},{path:"/:catchAll(.*)",component:async()=>a(()=>import("./404-page.28846f75.js"),["assets/404-page.28846f75.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css"])}]},{path:"/timeblocks",component:async()=>a(()=>import("./timeblock-calendar.3298e3a7.js"),["assets/timeblock-calendar.3298e3a7.js","assets/timeblock-calendar.f1cb0c47.css","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css","assets/circle-spinner.13cd4e61.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/date.6ac30a44.js"])},{path:"/timeblock/:id",component:async()=>a(()=>import("./timeblock-page.ac43cefd.js"),["assets/timeblock-page.ac43cefd.js","assets/timeblock-page.5cf004dc.css","assets/vendor.d57eb1e4.js","assets/vendor.41cdac3e.css","assets/date.6ac30a44.js","assets/plugin-vue_export-helper.21dcd24c.js","assets/circle-spinner.13cd4e61.js"])}],B=L({history:I(),routes:M});function G(o){const t=W(o);l.create({message:t,type:"negative",icon:T})}function F(o){if(typeof o=="object"&&o!==null&&"message"in o){const t=o.message,r=t.indexOf(": ");return r===-1?t:t.slice(0,r)}else return}function W(o){if(typeof o=="object"&&o!==null&&"message"in o){const t=o.message,r=t.indexOf(": ");return r===-1?t:t.slice(r+2)}else return String(o)}const z=b(()=>S());let f=!1;function K(o,t,r){const n=P(o,t);function e(s){if(F(s)==="tokenNotFound"){window.localStorage.removeItem(c.sessionToken);const i=u();i.isLoggedIn=!1}console.error(s)}n.config.errorHandler=e,f||(window.addEventListener("error",s=>{e(s.error)}),window.addEventListener("unhandledrejection",s=>{e(new Error(s.reason))}),f=!0),n.use(z()),n.use(O),n.use(j),n.use(A,{plugins:{Notify:l,Dialog:V}}),n.use(B),n.mount(r)}R.extend(x);K($,null,"#app");export{c as L,d as c,G as d,W as g,K as m,u};
