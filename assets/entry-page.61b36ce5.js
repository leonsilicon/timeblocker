import{g as k,j as $,l as K,k as m,o as g,f as w,n as ue,u as D,r as F,i as y,t as x,c as Y,m as q,h as R,q as ce,v as J,w as z,x as H,y as le,z as se}from"./vendor.9c232c22.js";import{_ as fe}from"./index.e1a77380.js";function B(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function W(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function L(n,e,t){return e&&W(n.prototype,e),t&&W(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function pe(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable})),t.push.apply(t,r)}return t}function _(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G(Object(t),!0).forEach(function(r){pe(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):G(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function Z(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function de(n,e){if(!!n){if(typeof n=="string")return Z(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Z(n,e)}}function N(n,e){var t=typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(!t){if(Array.isArray(n)||(t=de(n))||e&&n&&typeof n.length=="number"){t&&(n=t);var r=0,o=function(){};return{s:o,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(u){throw u},f:o}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,l=!1,i;return{s:function(){t=t.call(n)},n:function(){var u=t.next();return a=u.done,u},e:function(u){l=!0,i=u},f:function(){try{!a&&t.return!=null&&t.return()}finally{if(l)throw i}}}}function V(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function E(n,e){return E=Object.setPrototypeOf||function(r,o){return r.__proto__=o,r},E(n,e)}function Q(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&E(n,e)}function O(n){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},O(n)}function X(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function I(n){return I=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(n)}function ve(n,e){if(e&&(I(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V(n)}function ee(n){var e=X();return function(){var r=O(n),o;if(e){var a=O(this).constructor;o=Reflect.construct(r,arguments,a)}else o=r.apply(this,arguments);return ve(this,o)}}function he(n){return Function.toString.call(n).indexOf("[native code]")!==-1}function S(n,e,t){return X()?S=Reflect.construct:S=function(o,a,l){var i=[null];i.push.apply(i,a);var c=Function.bind.apply(o,i),u=new c;return l&&E(u,l.prototype),u},S.apply(null,arguments)}function T(n){var e=typeof Map=="function"?new Map:void 0;return T=function(r){if(r===null||!he(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(r))return e.get(r);e.set(r,o)}function o(){return S(r,arguments,O(this).constructor)}return o.prototype=Object.create(r.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),E(o,r)},T(n)}var A=function(n){Q(t,n);var e=ee(t);function t(r,o){var a,l,i,c,u;B(this,t);var v=(a=o.cause)!==null&&a!==void 0?a:o.originalError;return u=e.call(this,r,{cause:v}),u.originalError=void 0,u.cause=void 0,u.shape=void 0,u.data=void 0,u.isDone=void 0,u.isDone=(l=o.isDone)!==null&&l!==void 0?l:!1,u.cause=u.originalError=v,u.shape=(i=o.result)===null||i===void 0?void 0:i.error,u.data=(c=o.result)===null||c===void 0?void 0:c.error.data,u.name="TRPCClientError",Object.setPrototypeOf(V(u),t.prototype),u}return L(t,null,[{key:"from",value:function(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(o instanceof Error)){var l;return new t((l=o.error.message)!==null&&l!==void 0?l:"",_(_({},a),{},{cause:null,result:o}))}return o.name==="TRPCClientError"?o:new t(o.message,_(_({},a),{},{cause:o,result:null}))}}]),t}(T(Error)),te=function(n){Q(t,n);var e=ee(t);function t(){var r;return B(this,t),r=e.call(this,"The operation was aborted."),r.name="TRPCAbortError",Object.setPrototypeOf(V(r),t.prototype),r}return L(t)}(T(Error));function ye(n){for(var e={},t=0;t<n.length;t++){var r=n[t];e[t]=r}return e}function me(n){var e=n.type,t=n.runtime,r=n.path,o=t.AbortController?new t.AbortController:null,a={query:"GET",mutation:"POST",subscription:"PATCH"},l="input"in n?t.transformer.serialize(n.input):ye(n.inputs.map(function(f){return t.transformer.serialize(f)}));function i(){var f=n.url+"/"+r,p=[];return"inputs"in n&&p.push("batch=1"),e==="query"&&l!==void 0&&p.push("input=".concat(encodeURIComponent(JSON.stringify(l)))),p.length&&(f+="?"+p.join("&")),f}function c(){if(e!=="query")return l!==void 0?JSON.stringify(l):void 0}var u=new Promise(function(f,p){var s=i();Promise.resolve(t.headers()).then(function(h){return t.fetch(s,{method:a[e],signal:o==null?void 0:o.signal,body:c(),headers:_({"content-type":"application/json"},h)})}).then(function(h){return h.json()}).then(function(h){f(h)}).catch(p)}),v=function(){o==null||o.abort()};return{promise:u,cancel:v}}function be(n){var e=n.envelope,t=n.runtime;return"error"in e?A.from(_(_({},e),{},{error:t.transformer.deserialize(e.error)})):e.result.type==="data"?_(_({},e.result),{},{data:t.transformer.deserialize(e.result.data)}):e.result}function M(n,e){var t=null,r=null,o=function(){clearTimeout(r),r=null,t=null};function a(){var i=t;o();var c=n(i.items.map(function(f){return f.key})),u=c.promise,v=c.cancel;i.cancel=v,u.then(function(f){for(var p=0;p<f.length;p++){var s=f[p];i.items[p].resolve(s)}}).catch(function(f){var p=N(i.items),s;try{for(p.s();!(s=p.n()).done;){var h=s.value;h.reject(f)}}catch(d){p.e(d)}finally{p.f()}})}function l(i){var c={cancelled:!1,key:i};t||(t={items:[],cancel:function(){o()}});var u=t,v=new Promise(function(p,s){var h=c;if(h.reject=s,h.resolve=p,u.items.push(h),typeof(e==null?void 0:e.maxBatchSize)!="undefined"&&u.items.length>=e.maxBatchSize){a();return}});r||(r=setTimeout(a));var f=function(){c.cancelled=!0,!u.items.some(function(s){return!s.cancelled})&&u.cancel()};return{promise:v,cancel:f}}return{load:l}}function ge(n){var e=n.url,t=n.maxBatchSize;return function(r){var o=function(v){return function(f){var p=f.map(function(b){return b.path}).join(","),s=f.map(function(b){return b.input}),h=me({url:e,inputs:s,path:p,runtime:r,type:v}),d=h.promise,P=h.cancel;return{promise:d.then(function(b){return Array.isArray(b)?b:f.map(function(){return b})}),cancel:P}}},a=M(o("query"),{maxBatchSize:t}),l=M(o("mutation"),{maxBatchSize:t}),i=M(o("subscription"),{maxBatchSize:t}),c={query:a,subscription:i,mutation:l};return function(u){var v=u.op,f=u.prev,p=u.onDestroy,s=c[v.type],h=s.load(v),d=h.promise,P=h.cancel,b=!1,j=function(ie){b||(b=!0,f(ie))};p(function(){j(A.from(new te,{isDone:!0})),P()}),d.then(function(C){j(be({envelope:C,runtime:r}))}).catch(function(C){j(A.from(C))})}}}function _e(){var n=[],e=null;return{subscribe:function(r){var o={callbacks:r,unsubscribe:function(){var l=n.indexOf(o);if(l!==-1){var i,c;n.splice(l,1),(i=(c=o.callbacks).onDone)===null||i===void 0||i.call(c)}}};return n.push(o),function(){o.unsubscribe()}},next:function(r){var o=e;if(e=r,o!==r){var a=N(n),l;try{for(a.s();!(l=a.n()).done;){var i,c,u=l.value;(i=(c=u.callbacks).onNext)===null||i===void 0||i.call(c,r)}}catch(v){a.e(v)}finally{a.f()}}},done:function(){for(;n.length;){var r,o,a=n.pop();a==null||(r=(o=a.callbacks).onDone)===null||r===void 0||r.call(o),a==null||a.unsubscribe()}},error:function(t){function r(o){return t.apply(this,arguments)}return r.toString=function(){return t.toString()},r}(function(t){var r=N(n),o;try{for(r.s();!(o=r.n()).done;){var a,l,i=o.value;(a=(l=i.callbacks).onError)===null||a===void 0||a.call(l,t)}}catch(c){r.e(c)}finally{r.f()}})}}function we(n){var e=_e(),t=n;return e.next(n),_(_({},e),{},{next:function(o){t=o,e.next(o)},get:function(){return t}})}function xe(n){var e=we(null),t=function(a){a instanceof Error?(e.error(a),a.isDone&&e.done()):e.next(a)};function r(o){var a=o.index,l=o.op,i=o.stack,c=n.links[a],u=a===0?function(v){return t(v)}:i[a-1];c({op:l,prev:u,next:function(f,p){var s=i.slice();s[a]=p,r({index:a+1,op:f,stack:s})},onDestroy:function(f){e.subscribe({onDone:function(){f()}})}})}return r({index:0,op:n.op,stack:[]}),e}function ne(){return typeof window!="undefined"?window:global}function Re(n){var e=ne();return n||e.AbortController||null}function Ee(n){if(n)return n;var e=ne();if(e.fetch)return typeof e.fetch.bind=="function"?e.fetch.bind(e):e.fetch;throw new Error("No fetch implementation found")}var Oe=0;function Pe(){return++Oe}var Ce=function(){function n(e){var t=this;B(this,n),this.links=void 0,this.runtime=void 0;var r=e.transformer?"input"in e.transformer?{serialize:e.transformer.input.serialize,deserialize:e.transformer.output.deserialize}:e.transformer:{serialize:function(c){return c},deserialize:function(c){return c}},o=Ee(e==null?void 0:e.fetch),a=Re(e==null?void 0:e.AbortController);function l(){if(e.headers){var i=e.headers;return typeof i=="function"?i:function(){return i}}return function(){return{}}}this.runtime={transformer:r,AbortController:a,fetch:o,headers:l()},"links"in e?this.links=e.links.map(function(i){return i(t.runtime)}):this.links=[ge({url:e.url})(this.runtime)]}return L(n,[{key:"$request",value:function(t){var r=t.type,o=t.input,a=t.path,l=t.context,i=l===void 0?{}:l,c=xe({links:this.links,op:{id:Pe(),type:r,path:a,input:o,context:i}});return c}},{key:"requestAsPromise",value:function(t){var r=this.$request(t),o=new Promise(function(a,l){var i=r.get();if((i==null?void 0:i.type)==="data"){a(i.data),r.done();return}r.subscribe({onNext:function(u){(u==null?void 0:u.type)==="data"&&(a(u.data),r.done())},onError:function(u){l(u),r.done()},onDone:function(){l(A.from(new te))}})});return o.cancel=function(){r.done()},o}},{key:"query",value:function(t){var r,o=(r=arguments.length<=2?void 0:arguments[2])===null||r===void 0?void 0:r.context;return this.requestAsPromise({type:"query",path:t,input:arguments.length<=1?void 0:arguments[1],context:o})}},{key:"mutation",value:function(t){var r,o=(r=arguments.length<=2?void 0:arguments[2])===null||r===void 0?void 0:r.context;return this.requestAsPromise({type:"mutation",path:t,input:arguments.length<=1?void 0:arguments[1],context:o})}},{key:"subscription",value:function(t,r,o){var a=this.$request({type:"subscription",path:t,input:r,context:o.context});return a.subscribe({onNext:function(i){if(i){var c;(c=o.onNext)===null||c===void 0||c.call(o,i)}},onError:function(i){var c;(c=o.onError)===null||c===void 0||c.call(o,i)},onDone:o.onDone}),function(){a.done()}}}]),n}();function ke(n){return new Ce(n)}const re=ke({url:{}.VITE_BACKEND_URL});var Se="M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z";function oe(n){console.error(n)}const Te=k({emits:["verify","error","expired","render"],setup(n,{emit:e}){let t,r=window.hcaptcha!==void 0;$(()=>{r?a():(K("https://hcaptcha.com/1/api.js?onload=onHcaptchaLoaded&render=explicit&recaptchacompat=off"),r=!0)});const o=m();function a(){t=window.hcaptcha,t.render(o.value,{sitekey:{}.VITE_HCAPTCHA_SITE_KEY,callback:i=>{e("verify",i)},"expired-callback":()=>{e("expired")},"error-callback":i=>{e("error",i)}}),e("render")}const l={}.VITE_HCAPTCHA_SITE_KEY;return window.onHcaptchaLoaded=a,(i,c)=>(g(),w("div",{class:ue(D(l))},null,2))}}),Ae=["data-sitekey"],je=k({emits:["verify","expired","render","error"],setup(n,{emit:e}){let t=window.grecaptcha!==void 0;$(()=>{t?a():(K("https://www.google.com/recaptcha/api.js?onload=onRecaptchaLoaded&render=explicit"),t=!0)});let r;const o=m();function a(){r===void 0&&(r=window.grecaptcha),r.render(o.value,{callback:i=>{e("verify",i)},"expired-callback":()=>{e("expired")},"error-callback":i=>{e("error",i)}}),e("render")}window.onRecaptchaLoaded=a;const l={}.VITE_RECAPTCHA_SITE_KEY;return(i,c)=>(g(),w("div",{ref_key:"recaptchaEl",ref:o,"data-sitekey":D(l)},null,8,Ae))}}),De={},qe={class:"spinner-border w-6 h-6 animate-spin rounded-full"};function ze(n,e){return g(),w("div",qe)}var ae=fe(De,[["render",ze]]);const He={class:"column items-center"},Be={class:"text-sm mb-1"},Le={key:1},Ne={key:0,class:"text-red-500 row justify-center"},Ve=y("span",null,"ReCaptcha failed to load.",-1),Ie={key:2},Me=k({props:{useRecaptcha:{type:Boolean}},emits:["verify","update:useRecaptcha"],setup(n,{emit:e}){const t=n,r=m(),o=m();let a=m(!1),l=m(!1),i=m(!1);function c(d){e("verify",d)}function u(d){oe(d)}function v(){i.value=!0}function f(d){e("verify",d)}function p(d){l.value=!0,oe(d)}function s(){a.value=!0}function h(){e("update:useRecaptcha",!t.useRecaptcha)}return(d,P)=>{const b=F("v-icon");return g(),w("div",He,[y("div",Be,[y("span",null,x(t.useRecaptcha?"ReCaptcha":"HCaptcha")+" not working? ",1),y("button",{class:"cursor-pointer underline text-secondary",onClick:h}," Use "+x(t.useRecaptcha?"HCaptcha":"ReCaptcha"),1)]),t.useRecaptcha&&!a.value||!t.useRecaptcha&&!i.value?(g(),Y(ae,{key:0})):q("",!0),t.useRecaptcha?(g(),w("div",Le,[R(je,{ref_key:"recaptchaEl",ref:o,onVerify:f,onError:p,onRender:s},null,512),t.useRecaptcha&&l.value?(g(),w("div",Ne,[R(b,{path:D(Se),class:"mr-1"},null,8,["path"]),Ve])):q("",!0)])):(g(),w("div",Ie,[R(Te,{ref_key:"hcaptchaEl",ref:r,onVerify:c,onError:u,onRender:v},null,512)]))])}}});var U;(function(n){n.cookie="cookie",n.header="header"})(U||(U={}));const Ue={class:"my-auto self-center column items-center gap-3 py-8 px-20 border-2 rounded-md border-gray-300"},$e={class:"font-bold text-6xl"},Ke=y("label",{class:"label p-1"},[y("span",{class:"label-text font-bold"},"Email")],-1),Fe=y("label",{class:"label p-1"},[y("span",{class:"label-text font-bold"},"Password")],-1),Ye={key:0},Je=y("label",{class:"label p-1"},[y("span",{class:"label-text font-bold"},"Confirm Password")],-1),We={key:1},Qe=k({setup(n){const e=ce(),t=J(()=>e.path==="/login"),r=J(()=>!t.value),o=m(""),a=m(""),l=m(""),i=m(!0),c=m("");let u=m(!1);async function v(){try{u.value=!0,await re.mutation("login",{email:o.value,password:a.value,authenticationMethod:U.header})}finally{u.value=!1}}async function f(){try{u.value=!0,await re.mutation("createRegistrationRequest",{email:o.value,password:a.value,captcha:{captchaResponse:c.value,isRecaptcha:i.value}})}finally{u.value=!1}}return(p,s)=>{const h=F("router-link");return g(),w("div",Ue,[y("h1",$e,x(t.value?"Login":"Register"),1),y("div",null,[Ke,z(y("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>o.value=d),class:"input input-bordered w-[20rem]",type:"text"},null,512),[[H,o.value]])]),y("div",null,[Fe,z(y("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>a.value=d),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[H,a.value]])]),r.value?(g(),w("div",Ye,[Je,z(y("input",{"onUpdate:modelValue":s[2]||(s[2]=d=>l.value=d),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[H,l.value]]),R(Me,{"use-recaptcha":i.value,"onUpdate:use-recaptcha":s[3]||(s[3]=d=>i.value=d),class:"mt-4",onVerify:s[4]||(s[4]=d=>c.value=d)},null,8,["use-recaptcha"])])):q("",!0),y("button",{class:"btn btn-primary mt-2 px-8",onClick:s[5]||(s[5]=d=>t.value?v():f())},[u.value?(g(),Y(ae,{key:0})):(g(),w("div",We,x(t.value?"Login":"Register"),1))]),R(h,{class:"link hover:text-secondary transition-all",to:{force:!0,path:t.value?"/register":"/login"}},{default:le(()=>[se(x(t.value?"Don't have an account?":"Already have an account?"),1)]),_:1},8,["to"])])}}});export{Qe as default};
