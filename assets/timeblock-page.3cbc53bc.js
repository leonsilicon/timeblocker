var yt=Object.defineProperty,wt=Object.defineProperties;var Tt=Object.getOwnPropertyDescriptors;var He=Object.getOwnPropertySymbols;var _t=Object.prototype.hasOwnProperty,xt=Object.prototype.propertyIsEnumerable;var be=(e,t,o)=>t in e?yt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,E=(e,t)=>{for(var o in t||(t={}))_t.call(t,o)&&be(e,o,t[o]);if(He)for(var o of He(t))xt.call(t,o)&&be(e,o,t[o]);return e},P=(e,t)=>wt(e,Tt(t));var _=(e,t,o)=>(be(e,typeof t!="symbol"?t+"":t,o),o);import{u as V,d as Bt}from"./timeblock.254ff31d.js";import{L as It,M as Ct,B as b,O as R,u as H,a as O,A as y,P as Mt,o as T,b as B,l as I,R as ne,p as U,v as J,G as re,S as W,F as X,q as ae,n as G,T as Dt,e as x,r as Z,U as Oe,V as St,W as Et,w as j,X as qt,Y as $t,C as K,E as Nt,Z as ue,_ as Lt,$ as Ht,a0 as Y,a1 as $,a2 as ee,a3 as ye,a4 as Ot,a5 as we,a6 as Rt,a7 as ie,a8 as Te,a9 as Re,aa as jt,ab as Pt,ac as je,ad as Pe,ae as We,K as Ae,af as _e,ag as Wt,ah as xe,ai as ze,aj as At,ak as zt,al as Ft,am as Vt,an as Kt,ao as Yt,ap as Qt,aq as Ut,ar as Jt,as as Xt,at as Gt,au as Zt,av as eo,aw as Fe,ax as to,ay as oo,az as no,aA as ao,aB as io,aC as lo,aD as so,aE as ro,aF as Be,aG as uo,aH as co,aI as mo,aJ as vo,aK as ko,H as go}from"./vendor.23f03d93.js";import{c as D,d as Ie}from"./index.77d72341.js";import{C as fo}from"./circle-spinner.6b1df06e.js";import"./plugin-vue_export-helper.21dcd24c.js";let ho=e=>crypto.getRandomValues(new Uint8Array(e)),po=(e,t,o)=>{let n=(2<<Math.log(e.length-1)/Math.LN2)-1,a=-~(1.6*n*t/e.length);return(l=t)=>{let i="";for(;;){let u=o(a),c=a;for(;c--;)if(i+=e[u[c]&n]||"",i.length===l)return i}}},bo=(e,t=21)=>po(e,t,ho);var yo=["2g1c","2 girls 1 cup","acrotomophilia","alabama hot pocket","alaskan pipeline","anal","anilingus","anus","apeshit","arsehole","ass","asshole","assmunch","auto erotic","autoerotic","babeland","baby batter","baby juice","ball gag","ball gravy","ball kicking","ball licking","ball sack","ball sucking","bangbros","bangbus","bareback","barely legal","barenaked","bastard","bastardo","bastinado","bbw","bdsm","beaner","beaners","beaver cleaver","beaver lips","beastiality","bestiality","big black","big breasts","big knockers","big tits","bimbos","birdlock","bitch","bitches","black cock","blonde action","blonde on blonde action","blowjob","blow job","blow your load","blue waffle","blumpkin","bollocks","bondage","boner","boob","boobs","booty call","brown showers","brunette action","bukkake","bulldyke","bullet vibe","bullshit","bung hole","bunghole","busty","butt","buttcheeks","butthole","camel toe","camgirl","camslut","camwhore","carpet muncher","carpetmuncher","chocolate rosebuds","cialis","circlejerk","cleveland steamer","clit","clitoris","clover clamps","clusterfuck","cock","cocks","coprolagnia","coprophilia","cornhole","coon","coons","creampie","cum","cumming","cumshot","cumshots","cunnilingus","cunt","darkie","date rape","daterape","deep throat","deepthroat","dendrophilia","dick","dildo","dingleberry","dingleberries","dirty pillows","dirty sanchez","doggie style","doggiestyle","doggy style","doggystyle","dog style","dolcett","domination","dominatrix","dommes","donkey punch","double dong","double penetration","dp action","dry hump","dvda","eat my ass","ecchi","ejaculation","erotic","erotism","escort","eunuch","fag","faggot","fecal","felch","fellatio","feltch","female squirting","femdom","figging","fingerbang","fingering","fisting","foot fetish","footjob","frotting","fuck","fuck buttons","fuckin","fucking","fucktards","fudge packer","fudgepacker","futanari","gangbang","gang bang","gay sex","genitals","giant cock","girl on","girl on top","girls gone wild","goatcx","goatse","god damn","gokkun","golden shower","goodpoop","goo girl","goregasm","grope","group sex","g-spot","guro","hand job","handjob","hard core","hardcore","hentai","homoerotic","honkey","hooker","horny","hot carl","hot chick","how to kill","how to murder","huge fat","humping","incest","intercourse","jack off","jail bait","jailbait","jelly donut","jerk off","jigaboo","jiggaboo","jiggerboo","jizz","juggs","kike","kinbaku","kinkster","kinky","knobbing","leather restraint","leather straight jacket","lemon party","livesex","lolita","lovemaking","make me come","male squirting","masturbate","masturbating","masturbation","menage a trois","milf","missionary position","mong","motherfucker","mound of venus","mr hands","muff diver","muffdiving","nambla","nawashi","negro","neonazi","nigga","nigger","nig nog","nimphomania","nipple","nipples","nsfw","nsfw images","nude","nudity","nutten","nympho","nymphomania","octopussy","omorashi","one cup two girls","one guy one jar","orgasm","orgy","paedophile","paki","panties","panty","pedobear","pedophile","pegging","penis","phone sex","piece of shit","pikey","pissing","piss pig","pisspig","playboy","pleasure chest","pole smoker","ponyplay","poof","poon","poontang","punany","poop chute","poopchute","porn","porno","pornography","prince albert piercing","pthc","pubes","pussy","queaf","queef","quim","raghead","raging boner","rape","raping","rapist","rectum","reverse cowgirl","rimjob","rimming","rosy palm","rosy palm and her 5 sisters","rusty trombone","sadism","santorum","scat","schlong","scissoring","semen","sex","sexcam","sexo","sexy","sexual","sexually","sexuality","shaved beaver","shaved pussy","shemale","shibari","shit","shitblimp","shitty","shota","shrimping","skeet","slanteye","slut","s&m","smut","snatch","snowballing","sodomize","sodomy","spastic","spic","splooge","splooge moose","spooge","spread legs","spunk","strap on","strapon","strappado","strip club","style doggy","suck","sucks","suicide girls","sultry women","swastika","swinger","tainted love","taste my","tea bagging","threesome","throating","thumbzilla","tied up","tight white","tit","tits","titties","titty","tongue in a","topless","tosser","towelhead","tranny","tribadism","tub girl","tubgirl","tushy","twat","twink","twinkie","two girls one cup","undressing","upskirt","urethra play","urophilia","vagina","venus mound","viagra","vibrator","violet wand","vorarephilia","voyeur","voyeurweb","voyuer","vulva","wank","wetback","wet dream","white power","whore","worldsex","wrapping men","wrinkled starfish","xx","xxx","yaoi","yellow showers","yiffy","zoophilia","\u{1F595}"];function wo(e){const t=e.replace(/1/g,"i").replace(/3/g,"e").replace(/5/g,"s").replace(/8/g,"b").replace(/0/g,"o");for(const o of yo){const n=o.replace(/ /g,"").replace("l","i");if(new RegExp(n,"gi").test(t))return!0}return!1}function To(e){const t=e("6789BCDFGHJKLMNPQRTWbcdfghjkmnpqrtwz");return function(o=30){let n=t(o);for(;wo(n);)n=t(o);return n}}const ce=To(bo);function _o({taskBlocks:e}){const t=[];for(const o of e){const n=o.getStartMinute(),a=o.getEndMinute();t.push(a-n)}return t}function xo(e){return It()?(Ct(e),!0):!1}const le=typeof window!="undefined",Bo=e=>typeof e=="string",Ce=()=>{},Ve=le?window:void 0;le&&window.document;le&&window.navigator;le&&window.location;function se(...e){let t,o,n,a;if(Bo(e[0])?([o,n,a]=e,t=Ve):[t,o,n,a]=e,!t)return Ce;let l=Ce;const i=R(()=>H(t),c=>{l(),!!c&&(c.addEventListener(o,n,a),l=()=>{c.removeEventListener(o,n,a),l=Ce})},{immediate:!0,flush:"post"}),u=()=>{i(),l()};return xo(u),u}const Me=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},De="__vueuse_ssr_handlers__";Me[De]=Me[De]||{};Me[De];function Io(e={}){const{type:t="page",touch:o=!0,resetOnTouchEnds:n=!1,initialValue:a={x:0,y:0},window:l=Ve}=e,i=b(a.x),u=b(a.y),c=b(null),r=m=>{t==="page"?(i.value=m.pageX,u.value=m.pageY):t==="client"&&(i.value=m.clientX,u.value=m.clientY),c.value="mouse"},d=()=>{i.value=a.x,u.value=a.y},f=m=>{if(m.touches.length>0){const s=m.touches[0];t==="page"?(i.value=s.pageX,u.value=s.pageY):t==="client"&&(i.value=s.clientX,u.value=s.clientY),c.value="touch"}};return l&&(se(l,"mousemove",r,{passive:!0}),se(l,"dragover",r,{passive:!0}),o&&(se(l,"touchstart",f,{passive:!0}),se(l,"touchmove",f,{passive:!0}),n&&se(l,"touchend",d,{passive:!0}))),{x:i,y:u,sourceType:c}}var Ke,Ye;le&&(window==null?void 0:window.navigator)&&((Ke=window==null?void 0:window.navigator)==null?void 0:Ke.platform)&&/iP(ad|hone|od)/.test((Ye=window==null?void 0:window.navigator)==null?void 0:Ye.platform);var Co=Object.defineProperty,Qe=Object.getOwnPropertySymbols,Mo=Object.prototype.hasOwnProperty,Do=Object.prototype.propertyIsEnumerable,Ue=(e,t,o)=>t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,So=(e,t)=>{for(var o in t||(t={}))Mo.call(t,o)&&Ue(e,o,t[o]);if(Qe)for(var o of Qe(t))Do.call(t,o)&&Ue(e,o,t[o]);return e};const Eo={top:0,left:0,bottom:0,right:0,height:0,width:0};So({text:""},Eo);var te;(function(e){e.taskBoxDrop="task-box-drop"})(te||(te={}));function de(e){return Math.round(e/15)*15}const qo=["onMousedown"],$o={key:0,class:"text-sm text-gray-500"},No=["onMousedown"],Lo=O({props:{timeblockColumnId:null,taskBlockId:null,heightRatio:null},setup(e){const t=e;let o=b({});const n=V(),a=y(()=>n.activeTimeblock.getTaskBlock(t.taskBlockId)),l=y(()=>a.value.getTask()),i=y(()=>({"grid-column":"1 / span 1","grid-row-start":1+a.value.getStartMinute(),"grid-row-end":1+a.value.getEndMinute()}));let u=b(!1),c=b(void 0),r=b(!1),d=b(void 0);function f(g){var M;if(u.value||r.value){g.preventDefault();return}n.activeDraggingTaskBlock={id:t.taskBlockId,initialMouseY:g.pageY},(M=g.dataTransfer)==null||M.setData("text",JSON.stringify({type:te.taskBoxDrop,payload:{sourceTaskBlockId:t.taskBlockId}}))}function m(){n.activeDraggingTaskBlock=void 0}const s=b(),v=Io(),h=Mt(v,"y");function w(g){u.value=!0,c.value=g.pageY}window.addEventListener("mouseup",async()=>{if(!u.value)return;u.value=!1;const g=C();n.activeTimeblock.getTaskBlock(t.taskBlockId).setStartMinute(g),await D.mutation("updateTimeblockTaskBlock",{timeblockColumnId:t.timeblockColumnId,taskBlockId:t.taskBlockId,startMinute:g}),c.value=void 0,o.value={}});function k(g){r.value=!0,d.value=g.pageY}window.addEventListener("mouseup",async()=>{if(!r.value)return;r.value=!1;const g=S();n.activeTimeblock.getTaskBlock(t.taskBlockId).setEndMinute(g),await D.mutation("updateTimeblockTaskBlock",{timeblockColumnId:t.timeblockColumnId,taskBlockId:t.taskBlockId,endMinute:g}),d.value=void 0,o.value={}});function C(){return c.value===void 0?a.value.getStartMinute():Math.min(a.value.getEndMinute()-16,de(a.value.getStartMinute()+(h.value-c.value)))}function S(){return d.value===void 0?a.value.getEndMinute():Math.max(a.value.getStartMinute()+16,de(a.value.getEndMinute()+(h.value-d.value)))}return R(()=>[u.value,r.value,h.value],()=>{u.value&&c.value!==void 0?o.value={"grid-row-start":1+C()}:r.value&&d.value!==void 0&&(o.value={"grid-row-end":1+S()})}),(g,M)=>(T(),B("div",{ref_key:"taskBlockEl",ref:s,draggable:"true",class:"column center relative cursor-grab rounded-md bg-red-200 active:cursor-grabbing",style:W([i.value,o.value]),onDragstart:f,onDragend:m},[I("div",{class:"absolute inset-x-0 top-0 h-[4px] cursor-ns-resize",onMousedown:ne(w,["stop"])},null,40,qo),U(" "+J(l.value.getName())+" ",1),a.value.getEndMinute()-a.value.getStartMinute()>30?(T(),B("div",$o,J(l.value.getDescription()),1)):re("",!0),I("div",{class:"absolute inset-x-0 bottom-0 h-[4px] cursor-ns-resize",onMousedown:ne(k,["stop"])},null,40,No)],36))}}),Ho=O({props:{startDayMinute:null,endDayMinute:null},setup(e){const t=e,o=y(()=>({"grid-row-start":1+t.startDayMinute,"grid-row-end":1+t.endDayMinute,"grid-column":"1 / span 1"}));return(n,a)=>(T(),B("div",{style:W(o.value),class:"-z-1 h-full w-full border-x border-t border-gray-200"},null,4))}}),Oo=O({setup(e){const t=y(()=>({display:"grid","grid-template-rows":"repeat(1440, 1px)","grid-template-columns":"1fr"})),o=Array.from({length:24}).map((n,a)=>a*60);return(n,a)=>(T(),B("div",{style:W(t.value),class:"border-b border-gray-200"},[(T(!0),B(X,null,ae(H(o),l=>(T(),G(Ho,{key:l,"start-day-minute":l,"end-day-minute":l+60},null,8,["start-day-minute","end-day-minute"]))),128))],4))}});class Je{constructor({id:t,task:o,startMinute:n,endMinute:a,timeblock:l,timeblockColumnId:i}){_(this,"type");_(this,"task");_(this,"id");_(this,"startMinute");_(this,"endMinute");_(this,"timeblock");_(this,"timeblockColumnId");this.id=t,this.timeblock=l,this.task=o,this.type="normal",this.setStartMinute(n),this.setEndMinute(a),this.setTimeblockColumnId(i)}getId(){return this.id}getTask(){return this.task}setTask(t){this.task=t}getStartMinute(){return this.startMinute}setStartMinute(t){if(t===void 0)throw new Error("startMinute cannot be undefined.");if(t<0||t>1440)throw new Error(`Minute must be between 0 and 1440, received ${t}`);this.startMinute=t}getEndMinute(){return this.endMinute}setEndMinute(t){if(t===void 0)throw new Error("endMinute cannot be undefined.");if(t<0||t>1440)throw new Error(`Minute must be between 0 and 1440, received ${t}`);this.endMinute=t}getTimeblockColumnId(){return this.timeblockColumnId}setTimeblockColumnId(t){this.timeblockColumnId=t}}const Ro=["onDragover","onDragleave"],jo=O({props:{timeblockColumnId:null,date:null},setup(e){const t=e,o=V();(async()=>{var v;const m=await D.query("getTimeblockTaskBlocks",{timeblockColumnId:t.timeblockColumnId}),s=o.activeTimeblock;for(const{taskId:h,startMinute:w,endMinute:k,timeblockColumnId:C,id:S}of m){const g=new Je({id:S,startMinute:w,endMinute:k,timeblockColumnId:C,task:s.getTask(h),timeblock:s});s.addTaskBlock(g),(v=s.getColumn(C))==null||v.addTaskBlock(S)}})();const n=y(()=>{var m,s;return(s=(m=o.activeTimeblock.getColumn(t.timeblockColumnId))==null?void 0:m.getTaskBlocks())!=null?s:[]}),a=y(()=>_o({taskBlocks:n.value})),l=y(()=>({display:"grid","grid-template-rows":"repeat(1440, 1px)","grid-template-columns":"1fr"}));let i=b(!1);const u=Dt({"grid-column":"1 / span 1","grid-row-start":1,"grid-row-end":61}),c=b();function r(m){const{activeDraggingTaskBlock:s}=o;if(i.value=!0,s===void 0){const v=m.pageY-c.value.getBoundingClientRect().y,h=de(v);u["grid-row-start"]=h+1,u["grid-row-end"]=h+1+60}else{const v=o.activeTimeblock.getTaskBlock(s.id),h=v.getStartMinute()+(m.pageY-s.initialMouseY),w=de(h);u["grid-row-start"]=w+1,u["grid-row-end"]=w+1+(v.getEndMinute()-v.getStartMinute())}}function d(){i.value=!1}async function f(m){var w,k,C,S,g;i.value=!1;const s=(k=(w=m.dataTransfer)==null?void 0:w.getData("text"))!=null?k:"",{activeDraggingTaskBlock:v}=o;if(s==="")return;const h=JSON.parse(s);if(h.type===te.taskBoxDrop){const{payload:M}=h,{activeTimeblock:N}=o;if("taskId"in M){const q=m.clientY-c.value.getBoundingClientRect().top,L=Math.round(q/15)*15,A=L+60,z=N.getTask(M.taskId);if(z===void 0){Ie("Task not found.");return}const F=new Je({id:ce(),timeblock:N,task:z,startMinute:L,endMinute:A,timeblockColumnId:t.timeblockColumnId});N.addTaskBlock(F),(C=N.getColumn(t.timeblockColumnId))==null||C.addTaskBlock(F.getId()),await D.mutation("createTimeblockTaskBlocks",{timeblockColumnId:t.timeblockColumnId,taskBlocks:[{taskBlockId:F.getId(),taskId:M.taskId,startMinute:L,endMinute:A}]})}else if("sourceTaskBlockId"in M){if(v===void 0)return;const q=N.getTaskBlock(M.sourceTaskBlockId),L=q.getStartMinute()+(m.pageY-v.initialMouseY),A=Math.round(L/15)*15,z=A+(q.getEndMinute()-q.getStartMinute());if(q===void 0)Ie("Task block is undefined.");else{q.setStartMinute(A),q.setEndMinute(z);const F=q.getTimeblockColumnId();(S=N.getColumn(F))==null||S.removeTaskBlock(q.getId()),(g=N.getColumn(t.timeblockColumnId))==null||g.addTaskBlock(q.getId()),await D.mutation("updateTimeblockTaskBlock",{timeblockColumnId:t.timeblockColumnId,taskBlockId:q.getId(),startMinute:A,endMinute:z})}}}}return(m,s)=>(T(),B("div",{ref_key:"timeblockColumnEl",ref:c,style:W(l.value),class:"-z-1 border-b border-gray-200",onDrop:f,onDragover:ne(r,["prevent"]),onDragleave:ne(d,["prevent"])},[i.value?(T(),B("div",{key:0,style:W(H(u)),class:"rounded-md bg-red-100"},null,4)):re("",!0),x(Oo,{style:{"grid-row":"1 / -1","grid-column":"1 / -1"}}),(T(!0),B(X,null,ae(n.value,(v,h)=>(T(),G(Lo,{key:v.getId(),"task-block-id":v.getId(),"height-ratio":a.value[h],"timeblock-column-id":e.timeblockColumnId},null,8,["task-block-id","height-ratio","timeblock-column-id"]))),128))],44,Ro))}}),Po=["onClick"],Wo=U(" Delete "),Ao=O({setup(e){const t=V(),o=y(()=>t.activeTimeblock.getColumns());function n(l){return{"grid-column-start":l+2,"grid-column-end":l+3,"grid-row":"2 / -1"}}async function a(l){t.activeTimeblock.deleteColumn(l),await D.mutation("deleteTimeblockColumn",{columnId:l,timeblockId:t.activeTimeblock.getId()})}return(l,i)=>{const u=Z("v-icon");return T(!0),B(X,null,ae(o.value,(c,r)=>(T(),B(X,{key:c.getId()},[I("div",{style:W({"grid-column-start":r+2}),class:"column center font-bold"},[I("div",null,"Version "+J(r+1),1),o.value.length>1&&r===o.value.length-1?(T(),B("button",{key:0,class:"row cursor-pointer rounded-md border-2 border-red-200 pr-[7px] pl-1 text-xs text-red-200 hover:border-red-500 hover:text-red-500",onClick:d=>a(c.getId())},[x(u,{size:"15",icon:H(Oe)},null,8,["icon"]),Wo],8,Po)):re("",!0)],4),x(jo,{style:W(n(r)),"timeblock-column-id":c.getId(),date:c.getDate()},null,8,["style","timeblock-column-id","date"])],64))),128)}}}),zo={style:{"grid-row":"1 / span 1","grid-column":"-1 / span 1"},class:"self-center px-2"},Fo={class:"cursor-pointer text-gray-500 hover:text-black"},Vo=O({setup(e){function t(i){let u;return i<12?u="AM":i<24?u="PM":u="AM",`${i%12==0?12:i%12} ${u}`}function o({hour:i,minute:u}){return{"grid-row-start":2+(i*60+u),"grid-row-end":1+((i+1)*60+u)}}const n=V(),a=y(()=>({display:"grid","grid-template-rows":"60px repeat(1440, 1px)","grid-template-columns":`60px repeat(${n.activeTimeblock.getColumns().length}, 1fr) auto`}));async function l(){const i=n.activeTimeblock.getColumns().at(-1),c=i.getTaskBlocks().map(d=>({taskId:d.getTask().getId(),taskBlockId:ce(),startMinute:d.getStartMinute(),endMinute:d.getEndMinute()}));await D.mutation("createTimeblockTaskBlocks",{timeblockColumnId:i.getId(),taskBlocks:c});const r=ce();await D.mutation("addTimeblockColumn",{columnId:r,timeblockId:n.activeTimeblock.getId(),taskBlockIds:c.map(({taskBlockId:d})=>d)}),n.activeTimeblock.addColumn(r)}return(i,u)=>{const c=Z("v-icon");return T(),B("div",{style:W(a.value),class:"w-full"},[(T(),B(X,null,ae(25,r=>I("div",{key:r-1,class:"-mt-[12px] mr-2 text-right text-gray-500",style:W(o({hour:r-1,minute:0}))},J(t(r-1)),5)),64)),x(Ao),I("div",zo,[I("div",Fo,[x(c,{icon:H(St),onClick:l},null,8,["icon"])])])],4)}}}),Ko={class:"row mb-2 items-center justify-center"},Yo={class:"row mr-auto flex-1 gap-2 p-4"},Qo={class:"row flex-1 justify-center"},Uo=I("div",{class:"ml-auto flex-1"},null,-1),Jo=O({setup(e){const t=V();function o(){t.isTaskDockOpen=!t.isTaskDockOpen}const n=b(t.activeTimeblock.getName()),a=b();async function l(){await D.mutation("updateTimeblock",{timeblockId:t.activeTimeblock.getId(),name:n.value})}function i(u){u.key==="Enter"&&a.value.blur()}return(u,c)=>{const r=Z("v-icon"),d=Z("router-link"),f=Et("autowidth");return T(),B("div",Ko,[I("div",Yo,[x(d,{to:"/timeblocks"},{default:j(()=>[x(r,{icon:H(qt),class:"cursor-pointer"},null,8,["icon"])]),_:1}),x(r,{icon:H($t),class:"cursor-pointer",onClick:o},null,8,["icon"])]),I("div",Qo,[K(I("input",{ref_key:"timeblockNameInput",ref:a,"onUpdate:modelValue":c[0]||(c[0]=m=>n.value=m),class:"input input-sm hover:border-md rounded-md px-2 text-xl font-bold transition-[border] hover:border-gray-300",onKeypress:i,onFocusout:l},null,544),[[Nt,n.value],[f]])]),Uo])}}});class Xe{constructor({id:t,name:o,description:n,color:a,isHidden:l}){_(this,"type");_(this,"id");_(this,"name");_(this,"color");_(this,"description");_(this,"isHidden");this.id=t,this.setName(o),this.setColor(a!=null?a:"lightred"),n!==void 0&&this.setDescription(n),this.type="normal",this.setIsHidden(l)}setName(t){this.name=t}getType(){return this.type}getName(){return this.name}getId(){return this.id}getColor(){return this.color}setColor(t){this.color=t}getIsHidden(){return this.isHidden}setIsHidden(t){this.isHidden=t}getDescription(){return this.description}setDescription(t){this.description=t}removeDescription(){this.description=void 0}}const Xo={class:"m-2 self-stretch rounded-lg bg-red-100 py-2 text-center"},Go=["value"],Zo=["value"],Ge=O({props:{name:null,description:null,taskType:null},emits:["update:name","update:description","blur"],setup(e,{expose:t,emit:o}){const n=b(),a=b();async function l(f){f.relatedTarget!==a.value&&o("blur")}async function i(f){f.relatedTarget!==n.value&&o("blur")}function u(f){f.key==="Enter"&&a.value.focus()}function c(f){f.key==="Enter"&&a.value.blur()}function r(){n.value.focus()}function d(){a.value.focus()}return t({focusNameInput:r,focusDescriptionInput:d}),(f,m)=>(T(),B("div",Xo,[I("input",{ref_key:"taskNameInputEl",ref:n,value:e.name,placeholder:"Task Name",type:"text",class:"w-full bg-red-100 px-4 outline-none",onInput:m[0]||(m[0]=s=>o("update:name",s.target.value)),onFocusout:l,onKeydown:u},null,40,Go),I("input",{ref_key:"taskDescriptionInputEl",ref:a,value:e.description,placeholder:"Task Description",type:"text",class:"w-full bg-red-100 px-4 text-sm text-gray-500 outline-none",onInput:m[1]||(m[1]=s=>o("update:description",s.target.value)),onFocusout:i,onKeydown:c},null,40,Zo)]))}}),en={class:"row items-center justify-between"},tn={class:"ml-4"},on={class:"column mx-auto"},nn={class:"px-2 text-sm text-gray-500"},an={class:"mr-4"},ln=O({props:{id:null},setup(e){const t=e,o=V(),n=y(()=>o.activeTimeblock.getTask(t.id));function a(v){var h;(h=v.dataTransfer)==null||h.setData("text",JSON.stringify({type:te.taskBoxDrop,payload:{taskId:t.id}}))}let l=b(!1);function i(){l.value=!0}function u(){l.value=!1}async function c(){o.activeTimeblock.getTask(n.value.getId()).setIsHidden(!0),await D.mutation("hideTimeblockTask",{taskId:n.value.getId()})}let r=b(""),d=b(""),f=b(!1);function m(){var v;r.value=n.value.getName(),d.value=(v=n.value.getDescription())!=null?v:"",f.value=!0}async function s(){r.value!==""&&(f.value=!1,n.value.setName(r.value),n.value.setDescription(d.value),await D.mutation("updateTimeblockTask",{taskId:n.value.getId(),description:d.value,name:r.value}))}return(v,h)=>{const w=Z("v-icon");return f.value?(T(),G(Ge,{key:0,name:r.value,"onUpdate:name":h[0]||(h[0]=k=>r.value=k),description:d.value,"onUpdate:description":h[1]||(h[1]=k=>d.value=k),"task-type":n.value.getType(),onBlur:s},null,8,["name","description","task-type"])):(T(),B("div",{key:1,draggable:"true",class:"column m-2 cursor-grab self-stretch rounded-lg bg-red-100 py-2 text-center active:cursor-grabbing",onDragstart:a,onMouseover:i,onMouseout:u},[I("div",en,[K(I("div",tn,[x(w,{icon:H(Lt),class:"cursor-pointer text-red-500 transition-all hover:scale-105",onClick:c},null,8,["icon"])],512),[[ue,l.value]]),I("div",on,[I("div",null,J(n.value.getName()),1),I("div",nn,J(n.value.getDescription()),1)]),K(I("div",an,[x(w,{icon:H(Ht),class:"cursor-pointer text-green-500 transition-all hover:scale-105",onClick:m},null,8,["icon"])],512),[[ue,l.value]])])],32))}}});var me=Y({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:t}){const o=y(()=>parseInt(e.lines,10)),n=y(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(o.value===1?" ellipsis":"")),a=y(()=>e.lines!==void 0&&o.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":o.value}:null);return()=>$("div",{style:a.value,class:n.value},ee(t.default))}}),Ze=Y({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:t}){const o=y(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>$("div",{class:o.value},ee(t.default))}}),et=Y({name:"QItem",props:P(E(E({},ye),Ot),{tag:{type:String,default:"div"},active:Boolean,clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean}),emits:["click","keyup"],setup(e,{slots:t,emit:o}){const{proxy:{$q:n}}=ie(),a=we(e,n),{hasRouterLink:l,hasLink:i,linkProps:u,linkClass:c,linkTag:r,navigateToRouterLink:d}=Rt(),f=b(null),m=b(null),s=y(()=>e.clickable===!0||i.value===!0||e.tag==="label"),v=y(()=>e.disable!==!0&&s.value===!0),h=y(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(a.value===!0?" q-item--dark":"")+(i.value===!0?c.value:e.active===!0?`${e.activeClass!==void 0?` ${e.activeClass}`:""} q-item--active`:"")+(e.disable===!0?" disabled":"")+(v.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),w=y(()=>{if(e.insetLevel===void 0)return null;const g=n.lang.rtl===!0?"Right":"Left";return{["padding"+g]:16+e.insetLevel*56+"px"}});function k(g){v.value===!0&&(m.value!==null&&(g.qKeyEvent!==!0&&document.activeElement===f.value?m.value.focus():document.activeElement===m.value&&f.value.focus()),l.value===!0&&d(g),o("click",g))}function C(g){if(v.value===!0&&Te(g,13)===!0){Re(g),g.qKeyEvent=!0;const M=new MouseEvent("click",g);M.qKeyEvent=!0,f.value.dispatchEvent(M)}o("keyup",g)}function S(){const g=jt(t.default,[]);return v.value===!0&&g.unshift($("div",{class:"q-focus-helper",tabindex:-1,ref:m})),g}return()=>{const g={ref:f,class:h.value,style:w.value,onClick:k,onKeyup:C};return v.value===!0?(g.tabindex=e.tabindex||"0",Object.assign(g,u.value)):s.value===!0&&(g["aria-disabled"]="true"),$(r.value,g,S())}}}),sn=Y({name:"QList",props:P(E({},ye),{bordered:Boolean,dense:Boolean,separator:Boolean,padding:Boolean}),setup(e,{slots:t}){const o=ie(),n=we(e,o.proxy.$q),a=y(()=>"q-list"+(e.bordered===!0?" q-list--bordered":"")+(e.dense===!0?" q-list--dense":"")+(e.separator===!0?" q-list--separator":"")+(n.value===!0?" q-list--dark":"")+(e.padding===!0?" q-list--padding":""));return()=>$("div",{class:a.value},ee(t.default))}}),rn=Y({name:"QBtnGroup",props:{unelevated:Boolean,outline:Boolean,flat:Boolean,rounded:Boolean,push:Boolean,stretch:Boolean,glossy:Boolean,spread:Boolean},setup(e,{slots:t}){const o=y(()=>{const n=["unelevated","outline","flat","rounded","push","stretch","glossy"].filter(a=>e[a]===!0).map(a=>`q-btn-group--${a}`).join(" ");return`q-btn-group row no-wrap${n.length>0?" "+n:""}`+(e.spread===!0?" q-btn-group--spread":" inline")});return()=>$("div",{class:o.value},ee(t.default))}});function un(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),Pt.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const cn={target:{default:!0},noParentEvent:Boolean,contextMenu:Boolean};function dn({showing:e,avoidEmit:t,configureAnchorEl:o}){const{props:n,proxy:a,emit:l}=ie(),i=b(null);let u;function c(s){return i.value===null?!1:s===void 0||s.touches===void 0||s.touches.length<=1}const r={};o===void 0&&(Object.assign(r,{hide(s){a.hide(s)},toggle(s){a.toggle(s),s.qAnchorHandled=!0},toggleKey(s){Te(s,13)===!0&&r.toggle(s)},contextClick(s){a.hide(s),je(s),Pe(()=>{a.show(s),s.qAnchorHandled=!0})},prevent:je,mobileTouch(s){if(r.mobileCleanup(s),c(s)!==!0)return;a.hide(s),i.value.classList.add("non-selectable");const v=s.target;We(r,"anchor",[[v,"touchmove","mobileCleanup","passive"],[v,"touchend","mobileCleanup","passive"],[v,"touchcancel","mobileCleanup","passive"],[i.value,"contextmenu","prevent","notPassive"]]),u=setTimeout(()=>{a.show(s),s.qAnchorHandled=!0},300)},mobileCleanup(s){i.value.classList.remove("non-selectable"),clearTimeout(u),e.value===!0&&s!==void 0&&un()}}),o=function(s=n.contextMenu){if(n.noParentEvent===!0||i.value===null)return;let v;s===!0?a.$q.platform.is.mobile===!0?v=[[i.value,"touchstart","mobileTouch","passive"]]:v=[[i.value,"mousedown","hide","passive"],[i.value,"contextmenu","contextClick","notPassive"]]:v=[[i.value,"click","toggle","passive"],[i.value,"keyup","toggleKey","passive"]],We(r,"anchor",v)});function d(){Wt(r,"anchor")}function f(s){for(i.value=s;i.value.classList.contains("q-anchor--skip");)i.value=i.value.parentNode;o()}function m(){if(n.target===!1||n.target==="")i.value=null;else if(n.target===!0)f(a.$el.parentNode);else{let s=n.target;if(typeof n.target=="string")try{s=document.querySelector(n.target)}catch{s=void 0}s!=null?(i.value=s.$el||s,o()):(i.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return R(()=>n.contextMenu,s=>{i.value!==null&&(d(),o(s))}),R(()=>n.target,()=>{i.value!==null&&d(),m()}),R(()=>n.noParentEvent,s=>{i.value!==null&&(s===!0?d():o())}),Ae(()=>{m(),t!==!0&&n.modelValue===!0&&i.value===null&&l("update:modelValue",!1)}),_e(()=>{clearTimeout(u),d()}),{anchorEl:i,canShow:c,anchorEvents:r}}function mn(e,t){const o=b(null);let n;function a(u,c){const r=`${c!==void 0?"add":"remove"}EventListener`,d=c!==void 0?c:n;u!==window&&u[r]("scroll",d,xe.passive),window[r]("scroll",d,xe.passive),n=c}function l(){o.value!==null&&(a(o.value),o.value=null)}const i=R(()=>e.noParentEvent,()=>{o.value!==null&&(l(),t())});return _e(i),{localScrollTarget:o,unconfigureScrollTarget:l,changeScrollEvent:a}}let tt;const{notPassiveCapture:ve}=xe,Q=[];function ke(e){clearTimeout(tt);const t=e.target;if(t===void 0||t.nodeType===8||t.classList.contains("no-pointer-events")===!0)return;let o=ze.length-1;for(;o>=0;){const n=ze[o].$;if(n.type.name!=="QDialog")break;if(n.props.seamless!==!0)return;o--}for(let n=Q.length-1;n>=0;n--){const a=Q[n];if((a.anchorEl.value===null||a.anchorEl.value.contains(t)===!1)&&(t===document.body||a.innerRef.value!==null&&a.innerRef.value.contains(t)===!1))e.qClickOutside=!0,a.onClickOutside(e);else return}}function vn(e){Q.push(e),Q.length===1&&(document.addEventListener("mousedown",ke,ve),document.addEventListener("touchstart",ke,ve))}function ot(e){const t=Q.findIndex(o=>o===e);t>-1&&(Q.splice(t,1),Q.length===0&&(clearTimeout(tt),document.removeEventListener("mousedown",ke,ve),document.removeEventListener("touchstart",ke,ve)))}let nt,at;function it(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function kn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Se={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Se[`${e}#ltr`]=e,Se[`${e}#rtl`]=e});function lt(e,t){const o=e.split(" ");return{vertical:o[0],horizontal:Se[`${o[1]}#${t===!0?"rtl":"ltr"}`]}}function gn(e,t){let{top:o,left:n,right:a,bottom:l,width:i,height:u}=e.getBoundingClientRect();return t!==void 0&&(o-=t[1],n-=t[0],l+=t[1],a+=t[0],i+=t[0],u+=t[1]),{top:o,left:n,right:a,bottom:l,width:i,height:u,middle:n+(a-n)/2,center:o+(l-o)/2}}function fn(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function hn(e){if(At.is.ios===!0&&window.visualViewport!==void 0){const u=document.body.style,{offsetLeft:c,offsetTop:r}=window.visualViewport;c!==nt&&(u.setProperty("--q-pe-left",c+"px"),nt=c),r!==at&&(u.setProperty("--q-pe-top",r+"px"),at=r)}let t;const{scrollLeft:o,scrollTop:n}=e.el;if(e.absoluteOffset===void 0)t=gn(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:u,left:c}=e.anchorEl.getBoundingClientRect(),r=u+e.absoluteOffset.top,d=c+e.absoluteOffset.left;t={top:r,left:d,width:1,height:1,right:d+1,center:r,middle:d,bottom:r+1}}let a={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(a.minWidth=t.width+"px",e.cover===!0&&(a.minHeight=t.height+"px")),Object.assign(e.el.style,a);const l=fn(e.el),i={top:t[e.anchorOrigin.vertical]-l[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-l[e.selfOrigin.horizontal]};pn(i,t,l,e.anchorOrigin,e.selfOrigin),a={top:i.top+"px",left:i.left+"px"},i.maxHeight!==void 0&&(a.maxHeight=i.maxHeight+"px",t.height>i.maxHeight&&(a.minHeight=a.maxHeight)),i.maxWidth!==void 0&&(a.maxWidth=i.maxWidth+"px",t.width>i.maxWidth&&(a.minWidth=a.maxWidth)),Object.assign(e.el.style,a),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==o&&(e.el.scrollLeft=o)}function pn(e,t,o,n,a){const l=o.bottom,i=o.right,u=zt(),c=window.innerHeight-u,r=document.body.clientWidth;if(e.top<0||e.top+l>c)if(a.vertical==="center")e.top=t[n.vertical]>c/2?Math.max(0,c-l):0,e.maxHeight=Math.min(l,c);else if(t[n.vertical]>c/2){const d=Math.min(c,n.vertical==="center"?t.center:n.vertical===a.vertical?t.bottom:t.top);e.maxHeight=Math.min(l,d),e.top=Math.max(0,d-l)}else e.top=Math.max(0,n.vertical==="center"?t.center:n.vertical===a.vertical?t.top:t.bottom),e.maxHeight=Math.min(l,c-e.top);if(e.left<0||e.left+i>r)if(e.maxWidth=Math.min(i,r),a.horizontal==="middle")e.left=t[n.horizontal]>r/2?Math.max(0,r-i):0;else if(t[n.horizontal]>r/2){const d=Math.min(r,n.horizontal==="middle"?t.middle:n.horizontal===a.horizontal?t.right:t.left);e.maxWidth=Math.min(i,d),e.left=Math.max(0,d-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?t.middle:n.horizontal===a.horizontal?t.left:t.right),e.maxWidth=Math.min(i,r-e.left)}var bn=Y({name:"QMenu",inheritAttrs:!1,props:P(E(E(E(E({},cn),Ft),ye),Vt),{persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:it},self:{type:String,validator:it},offset:{type:Array,validator:kn},scrollTarget:{default:void 0},touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}}),emits:[...Kt,"click","escape-key"],setup(e,{slots:t,emit:o,attrs:n}){let a=null,l,i,u;const c=ie(),{proxy:r}=c,{$q:d}=r,f=b(null),m=b(!1),s=y(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),v=we(e,d),{registerTick:h,removeTick:w}=Yt(),{registerTimeout:k,removeTimeout:C}=Qt(),{transition:S,transitionStyle:g}=Ut(e,m),{localScrollTarget:M,changeScrollEvent:N,unconfigureScrollTarget:q}=mn(e,Ne),{anchorEl:L,canShow:A}=dn({showing:m}),{hide:z}=Jt({showing:m,canShow:A,handleShow:kt,handleHide:gt,hideOnRouteChange:s,processOnMount:!0}),{showPortal:F,hidePortal:ut,renderPortal:ct}=Xt(c,f,ht),ge={anchorEl:L,innerRef:f,onClickOutside(p){if(e.persistent!==!0&&m.value===!0)return z(p),(p.type==="touchstart"||p.target.classList.contains("q-dialog__backdrop"))&&Re(p),!0}},Ee=y(()=>lt(e.anchor||(e.cover===!0?"center middle":"bottom start"),d.lang.rtl)),dt=y(()=>e.cover===!0?Ee.value:lt(e.self||"top start",d.lang.rtl)),mt=y(()=>(e.square===!0?" q-menu--square":"")+(v.value===!0?" q-menu--dark q-dark":"")),vt=y(()=>e.autoClose===!0?{onClick:ft}:{}),qe=y(()=>m.value===!0&&e.persistent!==!0);R(qe,p=>{p===!0?(io(he),vn(ge)):(Fe(he),ot(ge))});function fe(){no(()=>{let p=f.value;p&&p.contains(document.activeElement)!==!0&&(p=p.querySelector("[autofocus], [data-autofocus]")||p,p.focus({preventScroll:!0}))})}function kt(p){if(w(),C(),a=e.noRefocus===!1?document.activeElement:null,Gt(Le),F(),Ne(),l=void 0,p!==void 0&&(e.touchPosition||e.contextMenu)){const pe=Zt(p);if(pe.left!==void 0){const{top:pt,left:bt}=L.value.getBoundingClientRect();l={left:pe.left-bt,top:pe.top-pt}}}i===void 0&&(i=R(()=>d.screen.width+"|"+d.screen.height+"|"+e.self+"|"+e.anchor+"|"+d.lang.rtl,oe)),e.noFocus!==!0&&document.activeElement.blur(),h(()=>{oe(),e.noFocus!==!0&&fe()}),k(()=>{d.platform.is.ios===!0&&(u=e.autoClose,f.value.click()),oe(),F(!0),o("show",p)},e.transitionDuration)}function gt(p){w(),C(),$e(!0),a!==null&&(p===void 0||p.qClickOutside!==!0)&&(a.focus(),a=null),k(()=>{ut(),o("hide",p)},e.transitionDuration)}function $e(p){l=void 0,i!==void 0&&(i(),i=void 0),(p===!0||m.value===!0)&&(eo(Le),q(),ot(ge),Fe(he)),p!==!0&&(a=null)}function Ne(){(L.value!==null||e.scrollTarget!==void 0)&&(M.value=to(L.value,e.scrollTarget),N(M.value,oe))}function ft(p){u!==!0?(ao(r,p),o("click",p)):u=!1}function Le(p){qe.value===!0&&e.noFocus!==!0&&lo(f.value,p.target)!==!0&&fe()}function he(p){o("escape-key"),z(p)}function oe(){const p=f.value;p===null||L.value===null||hn({el:p,offset:e.offset,anchorEl:L.value,anchorOrigin:Ee.value,selfOrigin:dt.value,absoluteOffset:l,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function ht(){return $(oo,{name:S.value,appear:!0},()=>m.value===!0?$("div",E(P(E({},n),{ref:f,tabindex:-1,class:["q-menu q-position-engine scroll"+mt.value,n.class],style:[n.style,g.value]}),vt.value),ee(t.default)):null)}return _e($e),Object.assign(r,{focus:fe,updatePosition:oe}),ct}}),yn=Y({name:"QBtnDropdown",props:P(E({},so),{modelValue:Boolean,split:Boolean,dropdownIcon:String,contentClass:[Array,String,Object],contentStyle:[Array,String,Object],cover:Boolean,persistent:Boolean,noRouteDismiss:Boolean,autoClose:Boolean,menuAnchor:{type:String,default:"bottom end"},menuSelf:{type:String,default:"top end"},menuOffset:Array,disableMainBtn:Boolean,disableDropdown:Boolean,noIconAnimation:Boolean}),emits:["update:modelValue","click","before-show","show","before-hide","hide"],setup(e,{slots:t,emit:o}){const{proxy:n}=ie(),a=b(e.modelValue),l=b(null),i=y(()=>{const k={"aria-expanded":a.value===!0?"true":"false","aria-haspopup":"true"};return(e.disable===!0||e.split===!1&&e.disableMainBtn===!0||e.disableDropdown===!0)&&(k["aria-disabled"]="true"),k}),u=y(()=>"q-btn-dropdown__arrow"+(a.value===!0&&e.noIconAnimation===!1?" rotate-180":"")+(e.split===!1?" q-btn-dropdown__arrow-container":""));R(()=>e.modelValue,k=>{l.value!==null&&l.value[k?"show":"hide"]()}),R(()=>e.split,w);function c(k){a.value=!0,o("before-show",k)}function r(k){o("show",k),o("update:modelValue",!0)}function d(k){a.value=!1,o("before-hide",k)}function f(k){o("hide",k),o("update:modelValue",!1)}function m(k){o("click",k)}function s(k){uo(k),w(),o("click",k)}function v(k){l.value!==null&&l.value.toggle(k)}function h(k){l.value!==null&&l.value.show(k)}function w(k){l.value!==null&&l.value.hide(k)}return Object.assign(n,{show:h,hide:w,toggle:v}),Ae(()=>{e.modelValue===!0&&h()}),()=>{const k=[$(ro,{class:u.value,name:e.dropdownIcon||n.$q.iconSet.arrow.dropdown})];return e.disableDropdown!==!0&&k.push($(bn,{ref:l,class:e.contentClass,style:e.contentStyle,cover:e.cover,fit:!0,persistent:e.persistent,noRouteDismiss:e.noRouteDismiss,autoClose:e.autoClose,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,separateClosePopup:!0,onBeforeShow:c,onShow:r,onBeforeHide:d,onHide:f},t.default)),e.split===!1?$(Be,P(E(P(E({class:"q-btn-dropdown q-btn-dropdown--simple"},e),{disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,round:!1}),i.value),{onClick:m}),()=>ee(t.label,[]).concat(k)):$(rn,{class:"q-btn-dropdown q-btn-dropdown--split no-wrap q-btn-item",outline:e.outline,flat:e.flat,rounded:e.rounded,push:e.push,unelevated:e.unelevated,glossy:e.glossy,stretch:e.stretch},()=>[$(Be,P(E({class:"q-btn-dropdown--current"},e),{disable:e.disable===!0||e.disableMainBtn===!0,noWrap:!0,iconRight:e.iconRight,round:!1,onClick:s}),t.label),$(Be,P(E({class:"q-btn-dropdown__arrow-container q-anchor--skip"},i.value),{disable:e.disable===!0||e.disableDropdown===!0,outline:e.outline,flat:e.flat,rounded:e.rounded,push:e.push,size:e.size,color:e.color,textColor:e.textColor,dense:e.dense,ripple:e.ripple}),()=>k)])}}});function st(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const t=parseInt(e,10);return isNaN(t)?0:t}var rt=co({name:"close-popup",beforeMount(e,{value:t}){const o={depth:st(t),handler(n){o.depth!==0&&setTimeout(()=>{const a=mo(e);a!==void 0&&vo(a,n,o.depth)})},handlerKey(n){Te(n,13)===!0&&o.handler(n)}};e.__qclosepopup=o,e.addEventListener("click",o.handler),e.addEventListener("keyup",o.handlerKey)},updated(e,{value:t,oldValue:o}){t!==o&&(e.__qclosepopup.depth=st(t))},beforeUnmount(e){const t=e.__qclosepopup;e.removeEventListener("click",t.handler),e.removeEventListener("keyup",t.handlerKey),delete e.__qclosepopup}});const wn=U("Add Fixed Time Task"),Tn=U(" A task that always occurs at the same time every day. "),_n=U("Add Fixed Weekly Time Task"),xn=U(" A task that always occurs on the same time and day every week. "),Bn=O({emits:["select"],setup(e,{emit:t}){return(o,n)=>(T(),B("div",null,[x(yn,{split:"","dropdown-icon":H(ko),color:"primary",label:"Add Task",onClick:n[2]||(n[2]=a=>t("select","normal"))},{default:j(()=>[x(sn,null,{default:j(()=>[K((T(),G(et,{clickable:"",onClick:n[0]||(n[0]=a=>t("select","fixed-time"))},{default:j(()=>[x(Ze,null,{default:j(()=>[x(me,null,{default:j(()=>[wn]),_:1}),x(me,{caption:""},{default:j(()=>[Tn]),_:1})]),_:1})]),_:1})),[[rt]]),K((T(),G(et,{clickable:"",onClick:n[1]||(n[1]=a=>t("select","fixed-weekly-time"))},{default:j(()=>[x(Ze,null,{default:j(()=>[x(me,null,{default:j(()=>[_n]),_:1}),x(me,{caption:""},{default:j(()=>[xn]),_:1})]),_:1})]),_:1})),[[rt]])]),_:1})]),_:1},8,["dropdown-icon"])]))}}),In=["onDragover"],Cn={key:0,class:"column center pointer-events-none absolute inset-0 rounded-md bg-[rgba(255,0,0,0.5)]"},Mn=I("div",{class:"text-black"},"Delete Task Block",-1),Dn=I("div",{class:"mb-2 text-3xl font-bold"},"Tasks",-1),Sn=O({setup(e){const t=V(),o=y(()=>t.activeTimeblock.getOrderedTaskIds().map(v=>t.activeTimeblock.getTask(v)).filter(v=>!v.getIsHidden())),n=b();let a=b(""),l=b(""),i=b(""),u=b(!1);async function c(v){i.value=v,u.value=!0,await Pe(),n.value.focusNameInput()}async function r(){if(a.value.trim()!==""){const v=ce(),h=new Xe({id:v,name:a.value,description:l.value,isHidden:!1});t.activeTimeblock.addTask(h);try{await D.mutation("addTimeblockTask",{id:v,name:a.value,description:l.value})}catch(w){Ie(w)}}a.value="",l.value="",u.value=!1}let d=b(!1);function f(){t.activeDraggingTaskBlock!==void 0&&(d.value=!0)}function m(){d.value=!1}async function s(v){var k,C,S;d.value=!1;const h=(C=(k=v.dataTransfer)==null?void 0:k.getData("text"))!=null?C:"";if(h==="")return;const w=JSON.parse(h);if(w.type===te.taskBoxDrop){const{payload:g}=w;if("sourceTaskBlockId"in g){const N=t.activeTimeblock.getTaskBlock(g.sourceTaskBlockId).getTimeblockColumnId();(S=t.activeTimeblock.getColumn(N))==null||S.removeTaskBlock(g.sourceTaskBlockId),await D.mutation("deleteTimeblockTaskBlock",{taskBlockId:g.sourceTaskBlockId,timeblockColumnId:N})}}}return(v,h)=>{const w=Z("v-icon");return K((T(),B("div",{class:"column relative w-[250px] shrink-0 items-center",onDrop:s,onDragover:ne(f,["prevent"]),onDragleave:m},[d.value?(T(),B("div",Cn,[x(w,{size:50,icon:H(Oe)},null,8,["icon"]),Mn])):re("",!0),Dn,x(Bn,{onSelect:c}),K(x(Ge,{ref_key:"timeblockTaskBoxEditorEl",ref:n,name:a.value,"onUpdate:name":h[0]||(h[0]=k=>a.value=k),description:l.value,"onUpdate:description":h[1]||(h[1]=k=>l.value=k),"task-type":i.value,onBlur:r},null,8,["name","description","task-type"]),[[ue,u.value]]),(T(!0),B(X,null,ae(o.value,k=>(T(),G(ln,{id:k.getId(),key:k.getId()},null,8,["id"]))),128))],40,In)),[[ue,H(t).isTaskDockOpen]])}}});class En{constructor({timeblock:t,id:o}){_(this,"timeblock");_(this,"id");_(this,"taskBlockIds");this.id=o,this.timeblock=t,this.taskBlockIds=new Set}getDate(){return this.timeblock.getDate()}getId(){return this.id}setTimeblock(t){this.timeblock=t}getTimeblock(){return this.timeblock}addTaskBlock(t){const o=this.timeblock.getTaskBlock(t);this.taskBlockIds.add(t),o.setTimeblockColumnId(this.getId())}removeTaskBlock(t){this.timeblock.getTaskBlock(t).setTimeblockColumnId(void 0),this.taskBlockIds.delete(t)}getTaskBlocks(){return[...this.taskBlockIds.values()].map(t=>this.timeblock.getTaskBlock(t))}}class qn{constructor({id:t,date:o,name:n}){_(this,"id");_(this,"date");_(this,"name");_(this,"columns");_(this,"taskMap");_(this,"taskBlockMap");_(this,"orderedTaskIds");_(this,"taskBlockToColumnNumberMap");this.id=t,this.name=n,this.date=o,this.taskMap=new Map,this.taskBlockMap=new Map,this.orderedTaskIds=[],this.columns=[]}getId(){return this.id}getName(){return this.name}setName(t){this.name=t}addTask(t,o=0){this.taskMap.set(t.getId(),t),this.orderedTaskIds.splice(o,0,t.getId())}removeTask(t){this.taskMap.delete(t)}getTask(t){const o=this.taskMap.get(t);if(o===void 0)throw new Error(`Task with ID ${t} not found.`);return o}getTaskBlock(t){const o=this.taskBlockMap.get(t);if(o===void 0)throw new Error(`Task block with ID ${t} not found.`);return o}addTaskBlock(t){this.taskBlockMap.set(t.getId(),t)}getOrderedTaskIds(){return this.orderedTaskIds}addColumn(t){this.columns.push(new En({timeblock:this,id:t}))}getColumn(t){return this.columns.find(o=>o.getId()===t)}deleteColumn(t){const o=this.columns.findIndex(n=>n.getId()===t);if(o===-1)throw new Error("Column not found.");this.columns.splice(o,1)}getDate(){return this.date}setDate(t){this.date=t}getColumns(){return this.columns}}const $n={key:0},Nn={key:1,class:"column"},Ln={class:"row px-4"},An=O({setup(e){const t=go(),o=y(()=>t.params),n=y(()=>o.value.id),a=V();R(()=>o.value.id,()=>{a.activeTimeblockId=o.value.id});let l=b(!0);return(async()=>{var d;const[i,u,c]=await Promise.all([D.query("getTimeblock",{timeblockId:o.value.id}),D.query("getTimeblockTasks",{limit:10,skip:0}),D.query("getTimeblockColumns",{timeblockId:o.value.id})]),r=Bt();if(!a.hasTimeblock(n.value)){const f=new qn({id:n.value,name:i.name,date:{day:r.date(),month:r.month(),year:r.year()}});for(const m of u)f.addTask(new Xe({id:m.id,name:m.name,description:(d=m.description)!=null?d:"",isHidden:m.isHidden}));a.addTimeblock(f),a.activeTimeblockId=f.getId();for(const m of c)f.addColumn(m.id)}l.value=!1})(),(i,u)=>l.value?(T(),B("div",$n,[x(fo)])):(T(),B("div",Nn,[x(Jo),I("div",Ln,[x(Sn),x(Vo)])]))}});export{An as default};
