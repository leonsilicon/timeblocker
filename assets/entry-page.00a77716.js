import{a as R,m as w,n as i,c as d,j as e,t as p,q as m,v as f,x as y,k as V,b as L,w as j,y as q,z as B,r as E,o as u,l as N}from"./vendor.7f3c978e.js";import{c as g,C as P}from"./circle-spinner.d8ea7cf9.js";import{L as S}from"./index.07bfcde8.js";import"./plugin-vue_export-helper.21dcd24c.js";const T={class:"my-auto self-center column items-center gap-3 py-8 px-20 border-2 rounded-md border-gray-300"},D={class:"font-bold text-6xl"},U=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Email")],-1),z=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Password")],-1),A={key:0},I=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Confirm Password")],-1),K={key:1},M={key:1,class:"text-red-400"},O=R({setup($){const _=q(),b=B(),a=w(()=>_.path==="/login"),x=w(()=>!a.value),c=i(""),n=i(""),v=i("");let s=i(""),r=i(!1);async function k(){try{s.value="",r.value=!0;const{sessionToken:o}=await g.mutation("login",{email:c.value,password:n.value});window.localStorage.setItem(S.sessionToken,o),await b.push("/timeblocks")}catch(o){s.value=o.message}finally{r.value=!1}}async function h(){try{if(n.value!==v.value)throw new Error("Passwords are not equal.");s.value="",r.value=!0,await g.mutation("createRegistrationRequest",{email:c.value,password:n.value}),await b.push("/timeblocks")}catch(o){s.value=o.message}finally{r.value=!1}}return(o,t)=>{const C=E("router-link");return u(),d("div",T,[e("h1",D,p(a.value?"Login":"Register"),1),e("div",null,[U,m(e("input",{"onUpdate:modelValue":t[0]||(t[0]=l=>c.value=l),class:"input input-bordered w-[20rem]",type:"text"},null,512),[[f,c.value]])]),e("div",null,[z,m(e("input",{"onUpdate:modelValue":t[1]||(t[1]=l=>n.value=l),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[f,n.value]])]),x.value?(u(),d("div",A,[I,m(e("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>v.value=l),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[f,v.value]])])):y("",!0),e("button",{class:"btn btn-primary mt-2 px-8",onClick:t[3]||(t[3]=l=>a.value?k():h())},[r.value?(u(),V(P,{key:0})):(u(),d("div",K,p(a.value?"Login":"Register"),1))]),s.value!==""?(u(),d("div",M,p(s.value),1)):y("",!0),L(C,{class:"link hover:text-secondary transition-all",to:{force:!0,path:a.value?"/register":"/login"}},{default:j(()=>[N(p(a.value?"Don't have an account?":"Already have an account?"),1)]),_:1},8,["to"])])}}});export{O as default};
