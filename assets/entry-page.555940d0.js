import{a as L,B as R,u as T,C as w,E as i,r as B,o as u,b as d,p as e,x as p,G as m,H as f,I as g,J as S,e as j,w as N,t as P}from"./vendor.334381a3.js";import{c as y,L as _,g as x}from"./index.e5b71ef8.js";import{C as D}from"./circle-spinner.1dca1f40.js";import"./plugin-vue_export-helper.21dcd24c.js";const I={class:"column my-auto items-center gap-3 self-center rounded-md border-2 border-gray-300 py-8 px-20"},U={class:"text-6xl font-bold"},q=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Email")],-1),M=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Password")],-1),A={key:0},G=e("label",{class:"label p-1"},[e("span",{class:"label-text font-bold"},"Confirm Password")],-1),H={key:1},J={key:1,class:"text-red-400"},Q=L({setup(K){const k=R(),b=T(),a=w(()=>k.path==="/login"),h=w(()=>!a.value),c=i(""),n=i(""),v=i("");let o=i(""),r=i(!1);async function C(){try{o.value="",r.value=!0;const{sessionToken:t}=await y.mutation("login",{email:c.value,password:n.value});window.localStorage.setItem(_.sessionToken,t),await b.push("/timeblocks")}catch(t){o.value=x(t)}finally{r.value=!1}}async function V(){try{if(n.value!==v.value)throw new Error("Passwords are not equal.");o.value="",r.value=!0;const{sessionToken:t}=await y.mutation("register",{email:c.value,password:n.value});window.localStorage.setItem(_.sessionToken,t),await b.push("/timeblocks")}catch(t){o.value=x(t)}finally{r.value=!1}}return(t,s)=>{const E=B("router-link");return u(),d("div",I,[e("h1",U,p(a.value?"Login":"Register"),1),e("div",null,[q,m(e("input",{"onUpdate:modelValue":s[0]||(s[0]=l=>c.value=l),class:"input input-bordered w-[20rem]",type:"text"},null,512),[[f,c.value]])]),e("div",null,[M,m(e("input",{"onUpdate:modelValue":s[1]||(s[1]=l=>n.value=l),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[f,n.value]])]),h.value?(u(),d("div",A,[G,m(e("input",{"onUpdate:modelValue":s[2]||(s[2]=l=>v.value=l),class:"input input-bordered w-[20rem]",type:"password"},null,512),[[f,v.value]])])):g("",!0),e("button",{class:"btn btn-primary mt-2 px-8",onClick:s[3]||(s[3]=l=>a.value?C():V())},[r.value?(u(),S(D,{key:0})):(u(),d("div",H,p(a.value?"Login":"Register"),1))]),o.value!==""?(u(),d("div",J,p(o.value),1)):g("",!0),j(E,{class:"link hover:text-secondary transition-all",to:{force:!0,path:a.value?"/register":"/login"}},{default:N(()=>[P(p(a.value?"Don't have an account?":"Already have an account?"),1)]),_:1},8,["to"])])}}});export{Q as default};
